!function e(t,n,o){function r(c,s){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(e,t){var i=o.transaction([e]);r[e]=0,n(i,e).onsuccess=function(t){var n=t.target.result;n&&(r[e]=n.value.id,n.continue())},i.oncomplete=function(){console.log("✓ now "+e+"'s max key is "+r[e]),t&&(t(),console.log("✓ openSuccessCallback finished"))}}function t(e,t){try{return JSON.parse(JSON.stringify(e))}catch(e){throw window.alert("please set correct"+t+"array object :)"),console.log(e),e}}function n(e,t){return e.objectStore(t).openCursor(IDBKeyRange.lowerBound(1),"next")}var o,r={};return{open:function(n,r,i){return window.indexedDB?(function(n,r){var i=window.indexedDB.open(n.name,n.version);i.onblocked=function(){window.alert("Please close all other tabs with this site open")},i.onupgradeneeded=function(r){o=r.target.result,console.log("✓ onupgradeneeded in"),function(n){t(n,"storeName").forEach(function(n){o.objectStoreNames.contains(n.storeName)||function(n){o.createObjectStore(n.storeName,{keyPath:n.key,autoIncrement:!0}).transaction.oncomplete=function(){console.log("✓ create "+n.storeName+"'s object store succeed"),n.initialData&&function(n,r){var i=o.transaction([n],"readwrite"),c=i.objectStore(n);t(r,"initial").forEach(function(e,t){var n=c.add(e);n.onsuccess=function(){console.log("✓ add initial data["+t+"] successed")}}),i.oncomplete=function(){console.log("✓ add all "+n+"'s initial data done :)"),e(n)}}(n.storeName,n.initialData)}}(n)})}(n.storeConfig)},i.onsuccess=function(i){(o=i.target.result).onversionchange=function(){o.close(),window.alert("A new version of this page is ready. Please reload")},function(n,o){var r=t(n,"storeName");r.forEach(function(t,n){n===r.length-1?e(t.storeName,function(){o(),console.log("✓ open indexedDB success")}):e(t.storeName)})}(n.storeConfig,r)},i.onerror=function(e){throw window.alert("Something is wrong with indexedDB, for more information, checkout console"),console.log(e.target.error),new Error(e.target.error)}}(n,r),0):(i?i():window.alert("✔ Your browser doesn't support a stable version of IndexedDB. You can install latest Chrome or FireFox to handler it"),0)},getLength:function(e){return r[e]},getNewKey:function(e){return r[e]+=1,r[e]},getItem:function(e,t,n){var r=o.transaction([e]).objectStore(e).get(parseInt(t,10));r.onsuccess=function(){console.log("✓ get "+e+"'s "+r.source.keyPath+" = "+t+" data success :)"),n&&n(r.result)}},getWhetherConditionItem:function(e,t,r,i){var c=o.transaction([e]),s=[];n(c,e).onsuccess=function(e){var n=e.target.result;n&&(r?n.value[t]&&s.push(n.value):r||n.value[t]||s.push(n.value),n.continue())},c.oncomplete=function(){console.log("✓ get "+e+"'s "+t+" = "+r+" data success :)"),i&&i(s)}},getAll:function(e,t){var r=o.transaction([e]),i=[];n(r,e).onsuccess=function(e){var t=e.target.result;t&&(i.push(t.value),t.continue())},r.oncomplete=function(){console.log("✓ get "+e+"'s all data success :)"),t&&t(i)}},addItem:function(e,t,n){var r=o.transaction([e],"readwrite").objectStore(e).add(t);r.onsuccess=function(){console.log("✓ add "+e+"'s "+r.source.keyPath+" = "+t[r.source.keyPath]+" data succeed :)"),n&&n(t)}},removeItem:function(e,t,n){var r=o.transaction([e],"readwrite").objectStore(e).delete(t);r.onsuccess=function(){console.log("✓ remove "+e+"'s "+r.source.keyPath+" = "+t+" data success :)"),n&&n(t)}},removeWhetherConditionItem:function(e,t,r,i){var c=o.transaction([e],"readwrite");n(c,e).onsuccess=function(e){var n=e.target.result;n&&(r?n.value[t]&&n.delete():r||n.value[t]||n.delete(),n.continue())},c.oncomplete=function(){console.log("✓ remove "+e+"'s "+t+" = "+r+" data success :)"),i&&i()}},clear:function(e,t){var r=o.transaction([e],"readwrite");n(r,e).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())},r.oncomplete=function(){console.log("✓ clear "+e+"'s all data success :)"),t&&t("clear all data success")}},updateItem:function(e,t,n){var r=o.transaction([e],"readwrite").objectStore(e).put(t);r.onsuccess=function(){console.log("✓ update "+e+"'s "+r.source.keyPath+" = "+t[r.source.keyPath]+" data success :)"),n&&n(t)}}}}();t.exports=o},{}],2:[function(e,t,n){"use strict";t.exports={name:"JustToDo",version:"23",storeConfig:[{storeName:"list",key:"id",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]},{storeName:"aphorism",key:"id",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"},{id:7,content:"There is only one thing we say to lazy: NOT TODAY"}]}]}},{}],3:[function(e,t,n){"use strict";!function(){var t=e("indexeddb-crud"),n=e("./db/config.js"),o=e("./utlis/addEvents/dbSuccess"),r=e("./utlis/lazyLoadWithoutDB");t.open(n,o,r)}()},{"./db/config.js":2,"./utlis/addEvents/dbSuccess":4,"./utlis/lazyLoadWithoutDB":9,"indexeddb-crud":1}],4:[function(e,t,n){"use strict";t.exports=function(){var t=e("../eventHandler/dbSuccess"),n=e("./general.js");return function(){n(t)}}()},{"../eventHandler/dbSuccess":7,"./general.js":5}],5:[function(e,t,n){t.exports=function(e){var t;e.showInit(),(t=document.querySelector("#list")).addEventListener("click",e.clickLi,!1),t.addEventListener("click",e.removeLi,!1),document.addEventListener("keydown",e.enterAdd,!1),document.querySelector("#add").addEventListener("click",e.add,!1),document.querySelector("#showDone").addEventListener("click",e.showDone,!1),document.querySelector("#showTodo").addEventListener("click",e.showTodo,!1),document.querySelector("#showAll").addEventListener("click",e.showAll,!1),document.querySelector("#showClearDone").addEventListener("click",e.showClearDone,!1),document.querySelector("#showClear").addEventListener("click",e.showClear,!1)}},{}],6:[function(e,t,n){t.exports=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}},{}],7:[function(e,t,n){"use strict";var o=function(){function t(){var e=document.querySelector("#input").value;""===e?window.alert("please input a real data~"):function(e){var t=document.querySelector("#list"),n=u.dataGenerator(c.getNewKey(i),e),o=document.createElement("div");u.ifEmpty.removeInit(),o.innerHTML=a(n),t.insertBefore(o,t.firstChild),document.querySelector("#input").value="",c.addItem(i,n)}(e)}function n(e){e.finished=!e.finished,c.updateItem(i,e,o)}function o(){c.getAll(i,s.all)}function r(e){c.getWhetherConditionItem(i,"finished",e,s.part)}var i="list",c=e("indexeddb-crud"),s=e("../refresh/dbSuccess"),a=e("../templete/itemGenerator.js"),u=e("./general.js");return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t,o=e.target;o.classList.contains("aphorism")||o.getAttribute("data-id")&&(o.classList.toggle("finished"),t=parseInt(o.getAttribute("data-id"),10),c.getItem(i,t,n))},removeLi:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.parentNode.getAttribute("data-id"),10),c.removeItem(i,t,o))},showInit:function(){c.getAll(i,s.init)},showAll:o,showDone:function(){r(!0)},showTodo:function(){r(!1)},showClearDone:function(){c.removeWhetherConditionItem(i,"finished",!0,function(){c.getAll(i,s.part)})},showClear:function(){s.clear(),s.random(),c.clear(i)}}}();t.exports=o},{"../refresh/dbSuccess":10,"../templete/itemGenerator.js":12,"./general.js":8,"indexeddb-crud":1}],8:[function(e,t,n){var o=function(){return{ifEmpty:{removeInit:function(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)}},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:function(e){var t,n=new Date,o=e,r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var i in r)new RegExp("("+i+")").test(o)&&("y+"===i?o=o.replace(RegExp.$1,(""+r[i]).substr(4-RegExp.$1.length)):"S+"===i?(t=1===(t=RegExp.$1.length)?3:t,o=o.replace(RegExp.$1,("00"+r[i]).substr((""+r[i]).length-1,t))):o=o.replace(RegExp.$1,1===RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return o}("MM月dd日hh:mm")+" "}}}}();t.exports=o},{}],9:[function(e,t,n){"use strict";t.exports=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="./dist/scripts/lazyLoad.min.js",document.body.appendChild(e)}},{}],10:[function(e,t,n){t.exports=function(){function t(){var e=Math.ceil(Math.random()*r.getLength(o));r.getItem(o,e,n)}function n(e){var t=e.content;i.sentenceHandler(t)}var o="aphorism",r=e("indexeddb-crud"),i=e("./general.js");return{init:i.init,all:i.all.bind(null,t),part:i.part.bind(null,t),clear:i.clear,random:t}}()},{"./general.js":11,"indexeddb-crud":1}],11:[function(e,t,n){"use strict";var o=function(){function t(e,t,n){e&&0!==e.length?document.querySelector("#list").innerHTML=n(e):t()}function n(){document.querySelector("#list").innerHTML=c("Welcome~, try to add your first to-do list : )")}function o(e){var t=function(e){var t=[],n=[];return e.forEach(function(e){e.finished?t.push(e):n.push(e)}),n.concat(t)}(e);return i(t)}function r(e){return i(e)}var i=e("../templete/itemGenerator.js"),c=e("../templete/sentenceGenerator.js"),s=e("../clearChildNodes.js");return{init:function(e){t(e,n,o)},all:function(e,n){t(n,e,o)},part:function(e,n){t(n,e,r)},clear:function(){s(document.querySelector("#list"))},sentenceHandler:function(e){var t=c(e);document.querySelector("#list").innerHTML=t}}}();t.exports=o},{"../clearChildNodes.js":6,"../templete/itemGenerator.js":12,"../templete/sentenceGenerator.js":13}],12:[function(e,t,n){"use strict";t.exports=function(e){var t=e,n=Handlebars.templates.li;return Array.isArray(e)||(t=[e]),n({listItems:t}).trim()}},{}],13:[function(e,t,n){t.exports=function(e){return(0,Handlebars.templates.li)({sentence:e}).trim()}},{}]},{},[3]);