!function e(t,n,o){function r(l,i){if(!n[l]){if(!t[l]){var u="function"==typeof require&&require;if(!i&&u)return u(l,!0);if(a)return a(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[l]={exports:{}};t[l][0].call(c.exports,function(e){var n=t[l][1][e];return r(n||e)},c,c.exports,e,t,n,o)}return n[l].exports}for(var a="function"==typeof require&&require,l=0;l<o.length;l++)r(o[l]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){var e=void 0,t=void 0,n={};function o(t,o){var r=e.transaction([t]);n[t]=0,a(r,t).onsuccess=function(e){var o=e.target.result;o&&(n[t]=o.value.id,o.continue())},r.oncomplete=function(){console.log("✓ now "+t+" 's max key is "+n[t]),o&&(o(),console.log("✓ openSuccessCallback finished"))}}function r(e,t){try{return JSON.parse(JSON.stringify(e))}catch(e){throw window.alert("please set correct "+t+" array object :)"),console.log(e),e}}function a(e,t){return e.objectStore(t).openCursor(IDBKeyRange.lowerBound(1),"next")}return{open:function(n,a,l){return window.indexedDB?(i=n,u=a,(s=window.indexedDB.open(i.name,i.version)).onblocked=function(){window.alert("Please close all other tabs with this site open")},s.onupgradeneeded=function(t){e=t.target.result,console.log("✓ onupgradeneeded in"),r(i.storeConfig,"storeName").forEach(function(t){var n;e.objectStoreNames.contains(t.storeName)||(n=t,e.createObjectStore(n.storeName,{keyPath:n.key,autoIncrement:!0}).transaction.oncomplete=function(){var t,a,l,i;console.log("✓ create "+n.storeName+" 's object store succeed"),n.initialData&&(t=n.storeName,a=n.initialData,l=e.transaction([t],"readwrite"),i=l.objectStore(t),r(a,"initial").forEach(function(e,t){var n=i.add(e);n.onsuccess=function(){console.log("✓ add initial data["+t+"] successed")}}),l.oncomplete=function(){console.log("✓ add all "+t+" 's initial data done :)"),o(t)})})})},s.onsuccess=function(n){var a,l,s;(e=n.target.result).onversionchange=function(){e.close(),window.alert("A new version of this page is ready. Please reload")},a=i.storeConfig,l=u,(s=r(a,"storeName")).forEach(function(e,n){0===n&&(t=e.storeName),n===s.length-1?o(e.storeName,function(){l(),console.log("✓ open indexedDB success")}):o(e.storeName)})},s.onerror=function(e){throw window.alert("Something is wrong with indexedDB, for more information, checkout console"),console.log(e.target.error),new Error(e.target.error)},0):(l?l():window.alert("✔ Your browser doesn't support a stable version of IndexedDB. You can install latest Chrome or FireFox to handler it"),0);var i,u,s},getLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return n[e]},getNewKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return n[e]+=1,n[e]},getItem:function(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=e.transaction([r]).objectStore(r).get(parseInt(n,10));a.onsuccess=function(){console.log("✓ get "+r+"'s "+a.source.keyPath+" = "+n+" data success :)"),o&&o(a.result)}},getWhetherConditionItem:function(n,o,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=e.transaction([l]),u=[];a(i,l).onsuccess=function(e){var t=e.target.result;t&&(t.value[n]===o&&u.push(t.value),t.continue())},i.oncomplete=function(){console.log("✓ get "+l+"'s "+n+" = "+o+" data success :)"),r&&r(u)}},getAll:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=e.transaction([o]),l=[];a(r,o).onsuccess=function(e){var t=e.target.result;t&&(l.push(t.value),t.continue())},r.oncomplete=function(){console.log("✓ get "+o+"'s all data success :)"),n&&n(l)}},addItem:function(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=e.transaction([r],"readwrite").objectStore(r).add(n);a.onsuccess=function(){console.log("✓ add "+r+"'s "+a.source.keyPath+"  = "+n[a.source.keyPath]+" data succeed :)"),o&&o(n)}},removeItem:function(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=e.transaction([r],"readwrite").objectStore(r).delete(n);a.onsuccess=function(){console.log("✓ remove "+r+"'s  "+a.source.keyPath+" = "+n+" data success :)"),o&&o(n)}},removeWhetherConditionItem:function(n,o,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=e.transaction([l],"readwrite");a(i,l).onsuccess=function(e){var t=e.target.result;t&&(t.value[n]===o&&t.delete(),t.continue())},i.oncomplete=function(){console.log("✓ remove "+l+"'s "+n+" = "+o+" data success :)"),r&&r()}},clear:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=e.transaction([o],"readwrite");a(r,o).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())},r.oncomplete=function(){console.log("✓ clear "+o+"'s all data success :)"),n&&n("clear all data success")}},updateItem:function(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=e.transaction([r],"readwrite").objectStore(r).put(n);a.onsuccess=function(){console.log("✓ update "+r+"'s "+a.source.keyPath+"  = "+n[a.source.keyPath]+" data success :)"),o&&o(n)}}}}();n.default=o},{}],2:[function(e,t,n){"use strict";t.exports=e("./dist/indexeddb-crud").default},{"./dist/indexeddb-crud":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"JustToDo",version:"23",storeConfig:[{storeName:"list",key:"id",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]},{storeName:"aphorism",key:"id",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"},{id:7,content:"There is only one thing we say to lazy: NOT TODAY"}]}]}},{}],4:[function(e,t,n){"use strict";var o=e("indexeddb-crud"),r=u(e("./db/config")),a=u(e("../templete/template")),l=u(e("./utlis/dbSuccess/addEvents")),i=u(e("./utlis/lazyLoadWithoutDB"));function u(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(),(0,o.open)(r.default,l.default,i.default)},{"../templete/template":16,"./db/config":3,"./utlis/dbSuccess/addEvents":9,"./utlis/lazyLoadWithoutDB":13,"indexeddb-crud":2}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.showInit();var t=document.querySelector("#list");t.addEventListener("click",e.clickLi,!1),t.addEventListener("click",e.removeLi,!1),document.addEventListener("keydown",e.enterAdd,!1),document.querySelector("#add").addEventListener("click",e.add,!1),document.querySelector("#showDone").addEventListener("click",e.showDone,!1),document.querySelector("#showTodo").addEventListener("click",e.showTodo,!1),document.querySelector("#showAll").addEventListener("click",e.showAll,!1),document.querySelector("#showClearDone").addEventListener("click",e.showClearDone,!1),document.querySelector("#showClear").addEventListener("click",e.showClear,!1)}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("../getFormatDate"),a=(o=r)&&o.__esModule?o:{default:o};var l={resetInput:function(){document.querySelector("#input").value=""},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:(0,a.default)("MM月dd日hh:mm")}}};n.default=l},{"../getFormatDate":12}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=l(e("../templete/itemGenerator")),r=l(e("../templete/sentenceGenerator")),a=l(e("../clearChildNodes"));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(e,t,n){e&&0!==e.length?document.querySelector("#list").innerHTML=n(e):t()}function t(){document.querySelector("#list").innerHTML=(0,r.default)("Welcome~, try to add your first to-do list : )")}function n(e){var t,n,r=(t=[],n=[],e.forEach(function(e){return e.finished?t.unshift(e):n.unshift(e)}),n.concat(t));return(0,o.default)(r)}function l(e){return(0,o.default)(e.reverse())}return{init:function(o){e(o,t,n)},all:function(t,o){e(o,t,n)},part:function(t,n){e(n,t,l)},clear:function(){(0,a.default)(document.querySelector("#list"))},sentenceHandler:function(e){var t=(0,r.default)(e);document.querySelector("#list").innerHTML=t}}}();n.default=i},{"../clearChildNodes":5,"../templete/itemGenerator":14,"../templete/sentenceGenerator":15}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=a(e("../dbGeneral/addEventsGenerator")),r=a(e("../dbSuccess/eventsHandler"));function a(e){return e&&e.__esModule?e:{default:e}}n.default=function(){(0,o.default)(r.default)}},{"../dbGeneral/addEventsGenerator":6,"../dbSuccess/eventsHandler":10}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=i(e("indexeddb-crud")),r=i(e("../dbSuccess/refresh")),a=i(e("../dbGeneral/eventsHandlerGeneral")),l=i(e("../templete/itemGenerator"));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){var e,t,n,r,i=document.querySelector("#input").value;""===i?window.alert("please input a real data~"):(e=i,t=a.default.dataGenerator(o.default.getNewKey(),e),n=(0,l.default)(t),"aphorism"===(r=document.querySelector("#list")).firstChild.className&&r.removeChild(r.firstChild),document.querySelector("#list").insertAdjacentHTML("afterbegin",n),a.default.resetInput(),o.default.addItem(t))}function t(e){var t=e;t.finished=!e.finished,o.default.updateItem(t,n)}function n(){o.default.getAll(r.default.all)}function i(e){o.default.getWhetherConditionItem("finished",e,r.default.part)}return{add:e,enterAdd:function(t){13===t.keyCode&&e()},clickLi:function(e){var n=e.target;if(!n.classList.contains("aphorism")&&n.getAttribute("data-id")){n.classList.toggle("finished");var r=parseInt(n.getAttribute("data-id"),10);o.default.getItem(r,t)}},removeLi:function(e){var t,n=e.target;if("close"===n.className){document.querySelector("#list").removeChild(n.parentNode),(t=document.querySelector("#list")).lastChild&&"#text"!==t.lastChild.nodeName||r.default.random();var a=parseInt(n.parentNode.getAttribute("data-id"),10);o.default.removeItem(a)}},showInit:function(){o.default.getAll(r.default.init)},showAll:n,showDone:function(){i(!0)},showTodo:function(){i(!1)},showClearDone:function(){o.default.removeWhetherConditionItem("finished",!0,function(){o.default.getAll(r.default.part)})},showClear:function(){r.default.clear(),r.default.random(),o.default.clear()}}}();n.default=u},{"../dbGeneral/eventsHandlerGeneral":7,"../dbSuccess/refresh":11,"../templete/itemGenerator":14,"indexeddb-crud":2}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=a(e("indexeddb-crud")),r=a(e("../dbGeneral/refreshGeneral"));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var e="aphorism",n=Math.ceil(Math.random()*o.default.getLength(e));o.default.getItem(n,t,e)}function t(e){var t=e.content;r.default.sentenceHandler(t)}return{init:r.default.init,all:r.default.all.bind(null,e),part:r.default.part.bind(null,e),clear:r.default.clear,random:e}}();n.default=l},{"../dbGeneral/refreshGeneral":8,"indexeddb-crud":2}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date,n={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes()},o=e;return Object.keys(n).forEach(function(e){if(new RegExp("("+e+")").test(o))if("y+"===e)o=o.replace(RegExp.$1,(""+n[e]).substr(4-RegExp.$1.length));else if("S+"===e){var t=RegExp.$1.length;t=1===t?3:t,o=o.replace(RegExp.$1,("00"+n[e]).substr((""+n[e]).length-1,t))}else o=o.replace(RegExp.$1,1===RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length))}),o}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="./dist/scripts/lazyLoad.min.js",document.body.appendChild(e)}},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=Handlebars.templates.li,n=e;return Array.isArray(e)||(n=[e]),t({listItems:n}).trim()}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,Handlebars.templates.li)({sentence:e}).trim()}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).li=e({1:function(e,t,n,o,r){var a;return'  <li class="aphorism">'+e.escapeExpression("function"==typeof(a=null!=(a=n.sentence||(null!=t?t.sentence:t))?a:n.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"sentence",hash:{},data:r}):a)+"</li>\n"},3:function(e,t,n,o,r){var a;return null!=(a=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.listItems:t,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r}))?a:""},4:function(e,t,n,o,r){var a;return null!=(a=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.finished:t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.program(7,r,0),data:r}))?a:""},5:function(e,t,n,r,a){var l,i=null!=t?t:e.nullContext||{},u=n.helperMissing,s="function",c=e.escapeExpression;return'      <li class="finished" data-id='+c((void 0===(l=null!=(l=n.id||(null!=t?t.id:t))?l:u)?"undefined":o(l))===s?l.call(i,{name:"id",hash:{},data:a}):l)+">\n        "+c((void 0===(l=null!=(l=n.date||(null!=t?t.date:t))?l:u)?"undefined":o(l))===s?l.call(i,{name:"date",hash:{},data:a}):l)+" : \n        <span>"+c((void 0===(l=null!=(l=n.event||(null!=t?t.event:t))?l:u)?"undefined":o(l))===s?l.call(i,{name:"event",hash:{},data:a}):l)+'</span>\n        <span class="close">×</span>\n      </li>\n'},7:function(e,t,n,r,a){var l,i=null!=t?t:e.nullContext||{},u=n.helperMissing,s="function",c=e.escapeExpression;return"      <li data-id="+c((void 0===(l=null!=(l=n.id||(null!=t?t.id:t))?l:u)?"undefined":o(l))===s?l.call(i,{name:"id",hash:{},data:a}):l)+">\n        "+c((void 0===(l=null!=(l=n.date||(null!=t?t.date:t))?l:u)?"undefined":o(l))===s?l.call(i,{name:"date",hash:{},data:a}):l)+" : \n        <span>"+c((void 0===(l=null!=(l=n.event||(null!=t?t.event:t))?l:u)?"undefined":o(l))===s?l.call(i,{name:"event",hash:{},data:a}):l)+'</span>\n        <span class="close">×</span>\n      </li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var a;return null!=(a=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.sentence:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?a:""},useData:!0})}},{}]},{},[4]);