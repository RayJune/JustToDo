!function e(t,n,o){function r(c,a){if(!n[c]){if(!t[c]){var s="function"==typeof require&&require;if(!a&&s)return s(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[c]={exports:{}};t[c][0].call(d.exports,function(e){var n=t[c][1][e];return r(n||e)},d,d.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(e){return(e?n.transaction([o],"readwrite"):n.transaction([o])).objectStore(o)}function t(){return e(!0).openCursor(IDBKeyRange.lowerBound(1),"next")}var n,o,r,i;return{open:function(c,a,s){return window.indexedDB?(function(c,a,s){var u=window.indexedDB.open(c.name,c.version);o=c.storeName,i=c.key,u.onblocked=function(){window.alert("Please close all other tabs with this site open")},u.onupgradeneeded=function(t){n=t.target.result,console.log("onupgradeneeded in"),n.objectStoreNames.contains(o)||function(t){n.createObjectStore(o,{keyPath:i,autoIncrement:!0}).transaction.oncomplete=function(){var n;if(console.log("create "+o+"'s objectStore succeed"),t){n=function(t){e(!0).add(t)};try{t.forEach(function(e,t){n(e).success=function(){console.log("add initial data["+t+"] successed")}})}catch(e){throw window.alert("please set correct initial array object data :)"),console.log(e),e}}}}(c.initialData)},u.onsuccess=function(e){n=e.target.result,a(),t().onsuccess=function(e){var t=e.target.result;t?(r=t.value.id,t.continue()):(r||(r=0),console.log("now key = "+r))}},u.onerror=function(e){window.alert("Something is wrong with indexedDB, we offer you the without DB mode, for more information, checkout console"),console.log(e.target.error),s()}}(c,a,s),0):(window.alert("Your browser doesn't support a stable version of IndexedDB. We will offer you the without indexedDB mode"),s(),0)},getNewKey:function(){return r+=1},addItem:function(t,n){e(!0).add(t).onsuccess=function(){console.log("✓ add "+i+" = "+t[i]+" data succeed :)"),n&&n(t)}},getItem:function(t,n){var o=e(!1).get(parseInt(t,10));o.onsuccess=function(){console.log("✓ get "+i+" = "+t+" data success :)"),n(o.result)}},getConditionItem:function(e,n,o){var r=[];t().onsuccess=function(t){var i=t.target.result;i?(n?i.value[e]&&r.push(i.value):n||i.value[e]||r.push(i.value),i.continue()):o&&o(r)}},getAll:function(e){var n=[];t().onsuccess=function(t){var o=t.target.result;o?(n.push(o.value),o.continue()):(console.log("✓ get all data success :)"),e&&e(n))}},updateItem:function(t,n){e(!0).put(t).onsuccess=function(){console.log("✓ update "+i+" = "+t[i]+" data success :)"),n&&n(t)}},removeItem:function(t,n){e(!0).delete(t).onsuccess=function(){console.log("✓ remove "+i+" = "+t+" data success :)"),n&&n(t)}},clear:function(e){t().onsuccess=function(t){var n=t.target.result;n?(n.delete(),n.continue()):(console.log("✓ clear all data success :)"),e&&e("clear all data success"))}}}}();t.exports=o},{}],2:[function(e,t,n){"use strict";t.exports={name:"JustToDo",version:"13",key:"id",storeName:"list",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]}},{}],3:[function(e,t,n){"use strict";!function(){var t=e("indexeddb-crud"),n=e("./db/listConfig.js"),o=e("./utlis/addEvents.js");t.open(n,o.dbSuccess,o.dbFail)}()},{"./db/listConfig.js":2,"./utlis/addEvents.js":4,"indexeddb-crud":1}],4:[function(e,t,n){"use strict";var o=function(){function t(t){return function(){!function(t){var n,o=e("./eventHandler/eventHandler.js"),r=t?o.dbSuccess:o.dbFail;r.showInit(),(n=document.querySelector("#list")).addEventListener("click",r.clickLi,!1),n.addEventListener("click",r.removeLi,!1),document.addEventListener("keydown",r.enterAdd,!1),document.querySelector("#add").addEventListener("click",r.add,!1),document.querySelector("#showDone").addEventListener("click",r.showDone,!1),document.querySelector("#showTodo").addEventListener("click",r.showTodo,!1),document.querySelector("#showAll").addEventListener("click",r.showAll,!1),document.querySelector("#showClear").addEventListener("click",r.showClear,!1)}(t)}}return{dbSuccess:t(!0),dbFail:t(!1)}}();t.exports=o},{"./eventHandler/eventHandler.js":8}],5:[function(e,t,n){"use strict";var o=function(){function e(e,t){var n=document.createTextNode(t.date+": "),o=document.createElement("span"),r=document.createTextNode(" "+t.event);o.appendChild(r),e.appendChild(n),e.appendChild(o),t.finished&&e.classList.add("finished"),function(e){var t=document.createElement("span"),n=document.createTextNode("×");t.appendChild(n),t.className="close",e.appendChild(t)}(e),function(e,t,n){e.setAttribute(t,n)}(e,"data-id",t.id)}return function(t){var n=document.createElement("li");return e(n,t),n}}();t.exports=o},{}],6:[function(e,t,n){"use strict";var o=function(){function t(){var e,t,o,r=document.querySelector("#input").value;return""===r?(window.alert("please input a real data~"),0):(n(),u+=1,t=s.dataGenerator(u,r),o=a(t),(e=document.querySelector("#list")).insertBefore(o,e.firstChild),document.querySelector("#input").value="",0)}function n(){var e=document.querySelector("#list"),t=document.querySelectorAll("#list li"),n=Object.keys(t);return n.forEach(function(o){t[n[o]].classList.contains("aphorism")&&e.removeChild(t[n[o]])})}function o(){var e=Object.keys(document.querySelectorAll("#list li"));e.forEach(function(t){var n=document.querySelector("#list"),o=document.querySelectorAll("#list li")[e[t]];i(o,!0),o.classList.contains("finished")&&(n.removeChild(n.childNodes[e[t]]),n.appendChild(o))})}function r(e){Array.prototype.forEach.call(document.querySelectorAll("#list li"),function(t){e?t.classList.contains("finished")?i(t,!0):i(t,!1):t.classList.contains("finished")?i(t,!1):i(t,!0)}),n(),s.ifEmpty.addRandom()}function i(e,t){e.style.display=t?"block":"none"}var c=e("../refresh.js"),a=e("../createLi.js"),s=e("./general.js"),u=0;return s.ifEmpty.addRandom=function(){document.querySelector("#list").firstChild&&!function(){var e=document.querySelectorAll("#list li"),t=Object.keys(e);return t.every(function(n){return"none"===e[t[n]].style.display})}()||c.random()},{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t=e.target;t.getAttribute("data-id")&&(function(e){e.classList.toggle("finished")}(t),o())},removeLi:function(e){var t,n,o;"close"===e.target.className&&(n=document.querySelector("#list"),o=document.querySelectorAll("#list li"),t=function(e){var t,n=document.querySelectorAll("#list li"),o=Object.keys(n);for(t in o)if(n[o[t]].getAttribute("data-id")===e)return o[t];return"Wrong id, not found in DOM tree"}(e.target.parentNode.getAttribute("data-id")),n.removeChild(o[t]),s.ifEmpty.addRandom())},showInit:function(){c.clear(),c.init()},showAll:o,showClear:function(){c.clear(),c.random()},showDone:function(){r(!0)},showTodo:function(){r(!1)}}}();t.exports=o},{"../createLi.js":5,"../refresh.js":10,"./general.js":9}],7:[function(e,t,n){"use strict";var o=function(){function t(){var e,t,n,o=document.querySelector("#input").value;return""===o?(window.alert("please input a real data~"),0):(s.ifEmpty.removeInit(),t=s.dataGenerator(i.getNewKey(),o),n=a(t),(e=document.querySelector("#list")).insertBefore(n,e.firstChild),document.querySelector("#input").value="",i.addItem(t),0)}function n(){c.clear(),i.getAll(c.all)}function o(e){c.clear(),i.getConditionItem("finished",e,c.part)}function r(e){e.finished=!e.finished,i.updateItem(e,n)}var i=e("indexeddb-crud"),c=e("../refresh.js"),a=e("../createLi.js"),s=e("./general.js");return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t,n=e.target;n.classList.contains("aphorism")||n.getAttribute("data-id")&&(n.classList.toggle("finished"),t=parseInt(n.getAttribute("data-id"),10),i.getItem(t,r))},removeLi:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.parentNode.getAttribute("data-id"),10),i.removeItem(t,n))},showInit:function(){c.clear(),i.getAll(c.init)},showAll:n,showClear:function(){c.clear(),c.random(),i.clear()},showDone:function(){o(!0)},showTodo:function(){o(!1)}}}();t.exports=o},{"../createLi.js":5,"../refresh.js":10,"./general.js":9,"indexeddb-crud":1}],8:[function(e,t,n){"use strict";var o={dbSuccess:e("./dbSuccess.js"),dbFail:e("./dbFail.js")};t.exports=o},{"./dbFail.js":6,"./dbSuccess.js":7}],9:[function(e,t,n){var o=function(){return{ifEmpty:{removeInit:function(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)}},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:function(e){var t,n=new Date,o=e,r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var i in r)new RegExp("("+i+")").test(o)&&("y+"===i?o=o.replace(RegExp.$1,(""+r[i]).substr(4-RegExp.$1.length)):"S+"===i?(t=1===(t=RegExp.$1.length)?3:t,o=o.replace(RegExp.$1,("00"+r[i]).substr((""+r[i]).length-1,t))):o=o.replace(RegExp.$1,1===RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return o}("yyyy年MM月dd日 hh:mm")}}}}();t.exports=o},{}],10:[function(e,t,n){"use strict";var o=function(){function t(){var e=["Yesterday You Said Tomorrow","Why are we here?","All in, or nothing","You Never Try, You Never Know","The unexamined life is not worth living. -- Socrates"],t=Math.floor(Math.random()*e.length);r(document.createTextNode(e[t]))}function n(e,t){e&&0!==e.length?function(e){var t=function(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment(),o=document.createDocumentFragment();return e.forEach(function(e){e.finished?n.insertBefore(i(e),n.firstChild):t.insertBefore(i(e),t.firstChild)}),o.appendChild(t),o.appendChild(n),o}(e);document.querySelector("#list").appendChild(t)}(e):t()}function o(){r(document.createTextNode("Welcome~, try to add your first to-do list : )"))}function r(e){var t=document.createElement("li");t.appendChild(e),t.className="aphorism",document.querySelector("#list").appendChild(t)}var i=e("./createLi.js");return{init:function(e){n(e,o)},all:function(e){n(e,t)},part:function(e){var n;e&&0!==e.length?(n=e.reduce(function(e,t){return e.insertBefore(i(t),e.firstChild),e},document.createDocumentFragment()),document.querySelector("#list").appendChild(n)):t()},clear:function(){for(var e=document.querySelector("#list");e.hasChildNodes();)e.removeChild(e.firstChild)},random:t}}();t.exports=o},{"./createLi.js":5}]},{},[3]);