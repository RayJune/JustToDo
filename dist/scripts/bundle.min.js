!function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(e,t){try{return JSON.parse(JSON.stringify(e))}catch(e){throw window.alert("please set correct"+t+"array object :)"),console.log(e),e}}function t(e,t){var i=o.transaction([e]);r[e]=0,n(i,e).onsuccess=function(n){var o=n.target.result;o?(r[e]=o.value.id,o.continue()):(console.log("✓ now "+e+"'s max key is "+r[e]),t&&(t(),console.log("✓ openSuccessCallback finished")))}}function n(e,t){return e.objectStore(t).openCursor(IDBKeyRange.lowerBound(1),"next")}var o,r={};return{open:function(n,r,i){return window.indexedDB?(function(n,r){var i=window.indexedDB.open(n.name,n.version);i.onblocked=function(){window.alert("Please close all other tabs with this site open")},i.onupgradeneeded=function(r){o=r.target.result,console.log("✓ onupgradeneeded in"),e(n.storeConfig,"storeName").forEach(function(n,r){o.objectStoreNames.contains(n.storeName)||function(n){o.createObjectStore(n.storeName,{keyPath:n.key,autoIncrement:!0}).transaction.oncomplete=function(){console.log("✓ create "+n.storeName+"'s object store succeed"),n.initialData&&function(n,r){var i=o.transaction([n],"readwrite"),a=i.objectStore(n);e(r,"initial").forEach(function(e,t){var n=a.add(e);n.onsuccess=function(){console.log("✓ add initial data["+t+"] successed")}}),i.oncomplete=function(){console.log("✓ add all"+n+"'s initial data done :)"),t(n)}}(n.storeName,n.initialData)}}(n)})},i.onsuccess=function(i){var a=e(n.storeConfig,"storeName");o=i.target.result,a.forEach(function(e,n){n===a.length-1?t(e.storeName,function(){r(),console.log("✓ open indexedDB success")}):t(e.storeName)})},i.onerror=function(e){throw window.alert("Something is wrong with indexedDB, for more information, checkout console"),console.log(e.target.error),new Error(e.target.error)}}(n,r),0):(i?i():window.alert("✔ Your browser doesn't support a stable version of IndexedDB. You can install latest Chrome or FireFox to handler it"),0)},getLength:function(e){return r[e]},getNewKey:function(e){return r[e]+=1,r[e]},getItem:function(e,t,n){var r=o.transaction([e]).objectStore(e).get(parseInt(t,10));r.onsuccess=function(){console.log("✓ get "+e+"'s "+r.source.keyPath+" = "+t+" data success :)"),n&&n(r.result)}},getWhetherConditionItem:function(e,t,r,i){var a=[];n(o.transaction([e]),e).onsuccess=function(n){var o=n.target.result;o?(r?o.value[t]&&a.push(o.value):r||o.value[t]||a.push(o.value),o.continue()):(console.log("✓ get "+e+"'s "+t+" : "+r+" data success :)"),i&&i(a))}},getAll:function(e,t){var r=[];n(o.transaction([e]),e).onsuccess=function(n){var o=n.target.result;o?(r.push(o.value),o.continue()):(console.log("✓ get "+e+"'s all data success :)"),t&&t(r))}},addItem:function(e,t,n){var r=o.transaction([e],"readwrite").objectStore(e).add(t);r.onsuccess=function(){console.log("✓ add "+e+"'s "+r.source.keyPath+" = "+t[r.source.keyPath]+" data succeed :)"),n&&n(t)}},removeItem:function(e,t,n){var r=o.transaction([e],"readwrite").objectStore(e).delete(t);r.onsuccess=function(){console.log("✓ remove "+e+"'s "+r.source.keyPath+" = "+t+" data success :)"),n&&n(t)}},removeWhetherConditionItem:function(e,t,r,i){n(o.transaction([e],"readwrite"),e).onsuccess=function(n){var o=n.target.result;o?(r?o.value[t]&&o.delete():r||o.value[t]||o.delete(),o.continue()):(console.log("✓ remove "+e+"'s "+t+" : "+r+" data success :)"),i&&i())}},clear:function(e,t){n(o.transaction([e],"readwrite"),e).onsuccess=function(n){var o=n.target.result;o?(o.delete(),o.continue()):(console.log("✓ clear "+e+"'s all data success :)"),t&&t("clear all data success"))}},updateItem:function(e,t,n){var r=o.transaction([e],"readwrite").objectStore(e).put(t);r.onsuccess=function(){console.log("✓ update "+e+"'s "+r.source.keyPath+" = "+t[r.source.keyPath]+" data success :)"),n&&n(t)}}}}();t.exports=o},{}],2:[function(e,t,n){"use strict";t.exports={name:"JustToDo",version:"23",storeConfig:[{storeName:"list",key:"id",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]},{storeName:"aphorism",key:"id",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"}]}]}},{}],3:[function(e,t,n){"use strict";!function(){var t=e("indexeddb-crud"),n=e("./db/DBConfig.js"),o=e("./utlis/addEvents.js");t.open(n,o.dbSuccess,o.dbFail)}()},{"./db/DBConfig.js":2,"./utlis/addEvents.js":4,"indexeddb-crud":1}],4:[function(e,t,n){"use strict";t.exports=function(){function t(t){return function(){!function(t){var n,o=e("./eventHandler/eventHandler.js"),r=t?o.dbSuccess:o.dbFail;r===o.dbFail&&window.alert("Your browser doesn't support a stable version of IndexedDB. We will offer you the without indexedDB mode"),r.showInit(),(n=document.querySelector("#list")).addEventListener("click",r.clickLi,!1),n.addEventListener("click",r.removeLi,!1),document.addEventListener("keydown",r.enterAdd,!1),document.querySelector("#add").addEventListener("click",r.add,!1),document.querySelector("#showDone").addEventListener("click",r.showDone,!1),document.querySelector("#showTodo").addEventListener("click",r.showTodo,!1),document.querySelector("#showAll").addEventListener("click",r.showAll,!1),document.querySelector("#showClear").addEventListener("click",r.showClear,!1)}(t)}}return{dbSuccess:t(!0),dbFail:t(!1)}}()},{"./eventHandler/eventHandler.js":7}],5:[function(e,t,n){"use strict";var o=function(){function t(){var e,t,o,r=document.querySelector("#input").value;return""===r?(window.alert("please input a real data~"),0):(n(),u+=1,t=s.dataGenerator(u,r),o=c(t),(e=document.querySelector("#list")).insertBefore(o,e.firstChild),document.querySelector("#input").value="",0)}function n(){var e=Object.keys(n),t=document.querySelector("#list"),n=document.querySelectorAll("#list li");return e.forEach(function(o){n[e[o]].classList.contains("aphorism")&&t.removeChild(n[e[o]])})}function o(){var e=Object.keys(document.querySelectorAll("#list li"));e.forEach(function(t){var n=document.querySelector("#list"),o=document.querySelectorAll("#list li")[e[t]];i(o,!0),o.classList.contains("finished")&&(n.removeChild(n.childNodes[e[t]]),n.appendChild(o))})}function r(e){Array.prototype.forEach.call(document.querySelectorAll("#list li"),function(t){e?t.classList.contains("finished")?i(t,!0):i(t,!1):t.classList.contains("finished")?i(t,!1):i(t,!0)}),n(),s.ifEmpty.addRandom()}function i(e,t){e.style.display=t?"block":"none"}var a=e("../refresh/refresh.js").dbFail,c=e("../liGenerator.js"),s=e("./general.js"),u=0;return s.ifEmpty.addRandom=function(){document.querySelector("#list").firstChild&&!function(){var e=Object.keys(t),t=document.querySelectorAll("#list li");return e.every(function(n){return"none"===t[e[n]].style.display})}()||a.random()},{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t=e.target;t.getAttribute("data-id")&&(function(e){e.classList.toggle("finished")}(t),o())},removeLi:function(e){var t,n,o;"close"===e.target.className&&(n=document.querySelector("#list"),o=document.querySelectorAll("#list li"),t=function(e){var t,n=Object.keys(o),o=document.querySelectorAll("#list li");for(t in n)if(o[n[t]].getAttribute("data-id")===e)return n[t];return"Wrong id, not found in DOM tree"}(e.target.parentNode.getAttribute("data-id")),n.removeChild(o[t]),s.ifEmpty.addRandom())},showInit:function(){a.clear(),a.init()},showAll:o,showClear:function(){a.clear(),a.random()},showDone:function(){r(!0)},showTodo:function(){r(!1)}}}();t.exports=o},{"../liGenerator.js":9,"../refresh/refresh.js":13,"./general.js":8}],6:[function(e,t,n){"use strict";var o=function(){function t(){var e,t,n=document.querySelector("#input").value;return""===n?(window.alert("please input a real data~"),0):(u.ifEmpty.removeInit(),t=u.dataGenerator(a.getNewKey(i),n),(e=document.querySelector("#list")).insertBefore(s(t),e.firstChild),document.querySelector("#input").value="",a.addItem(i,t),0)}function n(){c.clear(),a.getAll(i,c.all)}function o(e){c.clear(),a.getWhetherConditionItem(i,"finished",e,c.part)}function r(e){e.finished=!e.finished,a.updateItem(i,e,n)}var i="list",a=e("indexeddb-crud"),c=e("../refresh/refresh.js").dbSuccess,s=e("../liGenerator.js"),u=e("./general.js");return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t,n=e.target;n.classList.contains("aphorism")||n.getAttribute("data-id")&&(n.classList.toggle("finished"),t=parseInt(n.getAttribute("data-id"),10),a.getItem(i,t,r))},removeLi:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.parentNode.getAttribute("data-id"),10),a.removeItem(i,t,n))},showInit:function(){c.clear(),a.getAll(i,c.init)},showAll:n,showClear:function(){c.clear(),c.random(),a.clear(i)},showDone:function(){o(!0)},showTodo:function(){o(!1)}}}();t.exports=o},{"../liGenerator.js":9,"../refresh/refresh.js":13,"./general.js":8,"indexeddb-crud":1}],7:[function(e,t,n){"use strict";t.exports={dbSuccess:e("./dbSuccess.js"),dbFail:e("./dbFail.js")}},{"./dbFail.js":5,"./dbSuccess.js":6}],8:[function(e,t,n){var o=function(){return{ifEmpty:{removeInit:function(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)}},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:function(e){var t,n=new Date,o=e,r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var i in r)new RegExp("("+i+")").test(o)&&("y+"===i?o=o.replace(RegExp.$1,(""+r[i]).substr(4-RegExp.$1.length)):"S+"===i?(t=1===(t=RegExp.$1.length)?3:t,o=o.replace(RegExp.$1,("00"+r[i]).substr((""+r[i]).length-1,t))):o=o.replace(RegExp.$1,1===RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return o}("yyyy年MM月dd日 hh:mm")}}}}();t.exports=o},{}],9:[function(e,t,n){"use strict";var o=function(){function e(e,t){var n=document.createTextNode(" "+t.event),o=document.createTextNode(t.date+": "),r=document.createElement("span");r.appendChild(n),e.appendChild(o),e.appendChild(r),t.finished&&e.classList.add("finished"),function(e){var t=document.createElement("span"),n=document.createTextNode("×");t.appendChild(n),t.className="close",e.appendChild(t)}(e),function(e,t,n){e.setAttribute(t,n)}(e,"data-id",t.id)}return function(t){var n=document.createElement("li");return e(n,t),n}}();t.exports=o},{}],10:[function(e,t,n){t.exports=function(){function t(){var e=["Yesterday You Said Tomorrow","Why are we here?","All in, or nothing","You Never Try, You Never Know","The unexamined life is not worth living. -- Socrates"],t=e[Math.floor(Math.random()*e.length)];n.sentenceGenerator(t)}var n=e("./general.js");return{init:n.init,all:n.all.bind(null,t),part:n.part.bind(null,t),clear:n.clear,random:t}}()},{"./general.js":12}],11:[function(e,t,n){t.exports=function(){function t(){var e=Math.ceil(Math.random()*r.getLength(o));r.getItem(o,e,n)}function n(e){var t=e.content;i.sentenceGenerator(t)}var o="aphorism",r=e("indexeddb-crud"),i=e("./general.js");return{init:i.init,all:i.all.bind(null,t),part:i.part.bind(null,t),clear:i.clear,random:t}}()},{"./general.js":12,"indexeddb-crud":1}],12:[function(e,t,n){"use strict";var o=function(){function t(e,t){t&&0!==t.length?function(e){var t=function(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment(),o=document.createDocumentFragment();return e.forEach(function(e){e.finished?n.insertBefore(r(e),n.firstChild):t.insertBefore(r(e),t.firstChild)}),o.appendChild(t),o.appendChild(n),o}(e);document.querySelector("#list").appendChild(t)}(t):e()}function n(){o("Welcome~, try to add your first to-do list : )")}function o(e){var t=document.createElement("li"),n=document.createTextNode(e);t.appendChild(n),t.className="aphorism",document.querySelector("#list").appendChild(t)}var r=e("../liGenerator.js");return{init:function(e){t(n,e)},all:function(e,n){t(e,n)},part:function(e,t){var n;t&&0!==t.length?(n=t.reduce(function(e,t){return e.insertBefore(r(t),e.firstChild),e},document.createDocumentFragment()),document.querySelector("#list").appendChild(n)):e()},clear:function(){for(var e=document.querySelector("#list");e.hasChildNodes();)e.removeChild(e.firstChild)},sentenceGenerator:o}}();t.exports=o},{"../liGenerator.js":9}],13:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{"./dbFail.js":10,"./dbSuccess.js":11,dup:7}]},{},[3]);