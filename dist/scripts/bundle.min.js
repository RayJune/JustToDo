!function e(t,n,o){function r(c,u){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!u&&a)return a(c,!0);if(i)return i(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(e,t){var n=indexedDB.open(e.name,e.version);c=e.storeName,n.onerror=function(){console.log("Pity, fail to load indexedDB")},n.onsuccess=function(e){r=e.target.result,o(t)},n.onupgradeneeded=function(t){if(!(r=t.target.result).objectStoreNames.contains(c))var n=r.createObjectStore(c,{keyPath:e.key,autoIncrement:!0});n.add(e.dataDemo)}}function t(e){return(e?r.transaction([c],"readwrite"):r.transaction([c])).objectStore(c)}function n(){return IDBKeyRange.lowerBound(0,!0)}function o(e){var n=t(!0),o=IDBKeyRange.lowerBound(0);n.openCursor(o,"next").onsuccess=function(t){var n=t.target.result;n?(n.continue(),i=n.value.id):(console.log("now key is:"+i),e())}}var r,i,c;return{init:function(t,n){return window.indexedDB?(n&&e(t,n),0):(window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),0)},getKey:function(){return++i},add:function(e,n,o){var r=t(!0).add(e);r.onerror=function(){console.log("Pity, failed to add one data to indexedDB")},r.onsuccess=function(){console.log("Bravo, success to add one data to indexedDB"),n&&(o?n.apply(null,o):n())}},get:function(e,n,o){var r=t(!1).get(e);r.onerror=function(){console.log("Pity, get (key:"+e+"')s data faild")},r.onsuccess=function(){console.log("Great, get (key:"+e+"')s data succeed"),o?(o.unshift(r.result),n.apply(null,o)):n(r.result)}},getWhether:function(e,o,r,i){var c=[],u=t(!0),a=n();u.openCursor(a,"next").onsuccess=function(t){var n=t.target.result;n?(e?n.value[o]&&c.push(n.value):e||n.value[o]||c.push(n.value),n.continue()):i?(i.unshift(c),r.apply(null,i)):r(c)}},getAll:function(e,o){var r=t(!0),i=n(),c=[];r.openCursor(i,"next").onsuccess=function(t){var n=t.target.result;n?(c.push(n.value),n.continue()):o?(o.unshift(c),e.apply(null,o)):e(c)}},update:function(e,n,o){var r=t(!0).put(e);r.onerror=function(){console.log("Pity, modify failed")},r.onsuccess=function(){console.log("Aha, modify succeed"),n&&(o?n.apply(null,o):n())}},delete:function(e,n,o){var r=t(!0).delete(e);r.onerror=function(){console.log("delete (key:"+e+"')s value faild")},r.onsuccess=function(){console.log("delete (key: "+e+"')s value succeed"),n&&(o?n.apply(o):n())}},clear:function(e,o){var r=t(!0),i=n();r.openCursor(i,"next").onsuccess=function(t){var n,r=t.target.result;r?((n=r.delete()).onsuccess=function(){console.log("Great, delete all data succeed")},n.onerror=function(){console.log("Pity, delete all data faild")},r.continue()):e&&(o?e.apply(null,this):e())}}}}();t.exports=o},{}],2:[function(e,t,n){"use strict";!function(){function t(){for(var e=document.querySelector("#myUl");e.hasChildNodes();)e.removeChild(e.firstChild)}function n(){t(),x.getAll(o)}function o(e){var t,n=document.createDocumentFragment(),o=document.createDocumentFragment(),i=document.createDocumentFragment(),c=e.length;for(t=0;t<c;t++)e[t].finished?o.insertBefore(r(e[t]),o.firstChild):n.insertBefore(r(e[t]),n.firstChild);i.appendChild(n),i.appendChild(o),document.querySelector("#myUl").appendChild(i),console.log("刷新，并展示数据完毕")}function r(e){var t=document.createTextNode(e.userDate+": "),n=document.createElement("span"),o=document.createTextNode(" "+e.event),r=document.createElement("li");return n.appendChild(o),r.appendChild(t),r.appendChild(n),i(r,e.id),c(r,e.finished,e.id),r}function i(e,t){var n,o;n=document.createElement("span"),o=document.createTextNode("×"),n.className="close",n.appendChild(o),n.setAttribute("data-x",t),e.appendChild(n)}function c(e,t,n){t&&e.classList.add("checked"),e.getAttribute("data-id")||e.setAttribute("data-id",n)}function u(){var e,t=document.querySelector("#myUl"),n=a();(e=r(n)).setAttribute("data-id",n.id),t.insertBefore(e,t.firstChild),x.add(n)}function a(){var e=document.querySelector("#myInput"),t=e.value,n=d("yyyy年MM月dd日 hh:mm");return""===t?(alert("请亲传入数据后重新提交~"),!1):(e.value="",{id:x.getKey(),event:t,finished:!1,userDate:n})}function d(e){var t=new Date,n=e,o={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes()};for(var r in o)if(new RegExp("("+r+")").test(n))if("y+"===r)n=n.replace(RegExp.$1,(""+o[r]).substr(4-RegExp.$1.length));else if("S+"===r){var i=RegExp.$1.length;i=1===i?3:i,n=n.replace(RegExp.$1,("00"+o[r]).substr((""+o[r]).length-1,i))}else n=n.replace(RegExp.$1,1===RegExp.$1.length?o[r]:("00"+o[r]).substr((""+o[r]).length));return n}function l(e){13===e.keyCode&&u()}function s(e){var t,n=e.target;n.getAttribute("data-id")&&(t=parseInt(n.getAttribute("data-id"),10),x.get(t,f,[n]))}function f(e,t){t.finished=!e.finished,t.finished?t.classList.add("checked"):t.classList.remove("checked"),e.finished=t.finished,x.update(e,n)}function p(e){"close"===e.target.className&&g(parseInt(e.target.getAttribute("data-x"),10))}function g(e){x.delete(e),n()}function v(e){t(),x.getWhether(e,"finished",o),console.log("显示数据完毕")}function h(){v(!0)}function m(){v(!1)}function y(){t(),x.clear()}var x=e("indexeddb-crud"),k={name:"justToDo",version:"6",key:"id",storeName:"user"};k.dataDemo={id:0,event:0,finished:!0,date:0},x.init(k,function(){var e=document.querySelector("#myUl");n(),e.addEventListener("click",s,!1),e.addEventListener("click",p,!1),document.querySelector("#add").addEventListener("click",u,!1),document.addEventListener("keydown",l,!0),document.querySelector("#done").addEventListener("click",h,!1),document.querySelector("#todo").addEventListener("click",m,!1),document.querySelector("#all").addEventListener("click",n,!1),document.querySelector("#delete").addEventListener("click",y,!1)})}()},{"indexeddb-crud":1}]},{},[2]);