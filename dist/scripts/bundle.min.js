!function e(t,n,o){function r(c,a){if(!n[c]){if(!t[c]){var u="function"==typeof require&&require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(e,r){var i=indexedDB.open(e.name,e.version);u=e.storeName,s=e.key,d=t(e.initialData),p=n(d),f=e.initialJSONDataUseful,i.onerror=function(){console.log("Pity, fail to load indexedDB")},i.onsuccess=function(e){(a=e.target.result).onerror=function(e){window.alert("Database error: "+e.target.errorCode)},r(),o()},i.onupgradeneeded=function(e){console.log(d),console.log(p),a=e.target.result,console.log("scheme up"),a.objectStoreNames.contains(u)||(a.createObjectStore(u,{keyPath:s,autoIncrement:!0}),console.log(void 0),console.log(p))}}function t(e){var t;try{t=JSON.parse(JSON.stringify(e))}catch(e){window.alert("Please set correct JSON type :>"),t=!1}finally{return t}}function n(e){return e?e.length?e.length:1:0}function o(){var e=r(!0),t=IDBKeyRange.lowerBound(0);e.openCursor(t,"next").onsuccess=function(e){var t=e.target.result;t?(t.continue(),l=t.value.id):(l||(l=0),console.log("now key is:"+l))}}function r(e){return(e?a.transaction([u],"readwrite"):a.transaction([u])).objectStore(u)}function i(){return f?IDBKeyRange.lowerBound(0):IDBKeyRange.lowerBound(0,!0)}function c(e,t,n){n?(n.unshift(t),e.apply(null,n)):e(t)}var a,u,s,l,d,f,p;return{init:function(t,n){return window.indexedDB?(e(t,n),0):(window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),0)},getNewKey:function(){return l+=1},addItem:function(e,t,n){r(!0).add(e).onsuccess=function(){console.log("Bravo, success to add one data to indexedDB"),t&&c(t,e,n)}},getItem:function(e,t,n){var o=r(!1).get(e);o.onsuccess=function(){console.log("Great, get (key:"+e+"')s data succeed"),c(t,o.result,n)}},getConditionItem:function(e,t,n,o){var a=r(!0),u=i(),s=[];a.openCursor(u,"next").onsuccess=function(r){var i=r.target.result;i?(t?i.value[e]&&s.push(i.value):t||i.value[e]||s.push(i.value),i.continue()):c(n,s,o)}},getAll:function(e,t){var n=r(!0),o=i(),a=[];n.openCursor(o,"next").onsuccess=function(n){var o=n.target.result;o?(a.push(o.value),o.continue()):c(e,a,t)}},updateItem:function(e,t,n){r(!0).put(e).onsuccess=function(){console.log("Aha, modify succeed"),t&&c(t,e,n)}},removeItem:function(e,t,n){r(!0).delete(e).onsuccess=function(){console.log("delete (key: "+e+"')s value succeed"),t&&c(t,e,n)}},clear:function(e,t){var n=r(!0),o=i();n.openCursor(o,"next").onsuccess=function(n){var o=n.target.result;o?(o.delete().onsuccess=function(){},o.continue()):e&&c(e,"all data",t)}}}}();t.exports=o},{}],2:[function(e,t,n){"use strict";e("./utlis/addEvents.js").fail()},{"./utlis/addEvents.js":3}],3:[function(e,t,n){"use strict";var o=function(){function t(t){function n(t){var n,o=e("./eventHandler.js"),r=t?o.success:o.fail;r.showInit(),(n=document.querySelector("#list")).addEventListener("click",r.clickLi,!1),n.addEventListener("click",r.removeLi,!1),document.addEventListener("keydown",r.enterAdd,!1),document.querySelector("#add").addEventListener("click",r.add,!1),document.querySelector("#showDone").addEventListener("click",r.showDone,!1),document.querySelector("#showTodo").addEventListener("click",r.showTodo,!1),document.querySelector("#showAll").addEventListener("click",r.showAll,!1),document.querySelector("#showClear").addEventListener("click",r.showClear,!1)}return console.log(t),function(){n(t)}}return{success:t(!0),fail:t(!1)}}();console.dir(o),t.exports=o},{"./eventHandler.js":5}],4:[function(e,t,n){"use strict";var o=function(){function e(e,o){var r=document.createTextNode(o.userDate+": "),i=document.createElement("span"),c=document.createTextNode(" "+o.event);i.appendChild(c),e.appendChild(r),e.appendChild(i),o.finished&&e.classList.add("finished"),t(e,o.id),n(e,"data-id",o.id)}function t(e,t){var o=document.createElement("span"),r=document.createTextNode("×");o.appendChild(r),o.className="close",n(o,"data-x",t),e.appendChild(o)}function n(e,t,n){e.setAttribute(t,n)}return function(t){var n=document.createElement("li");return e(n,t),n}}();t.exports=o},{}],5:[function(e,t,n){"use strict";var o=function(){function t(t){return console.log(t),function(t){function n(){var e,n,o,c=document.querySelector("#input").value;return""===c?(alert("please input a real data~"),0):(r(),n=i(c),o=d(n),(e=document.querySelector("#list")).insertBefore(o,e.firstChild),document.querySelector("#input").value="",t&&s.addItem(n),0)}function o(){t?(l.clear(),s.getAll(l.all)):Array.prototype.forEach.call(document.querySelectorAll("#list li"),function(e){l.appear(e)})}function r(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)}function i(e){return{id:t?s.getNewKey():233,event:e,finished:!1,userDate:c("yyyy年MM月dd日 hh:mm")}}function c(e){var t,n=new Date,o=e,r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var i in r)new RegExp("("+i+")").test(o)&&("y+"===i?o=o.replace(RegExp.$1,(""+r[i]).substr(4-RegExp.$1.length)):"S+"===i?(t=1===(t=RegExp.$1.length)?3:t,o=o.replace(RegExp.$1,("00"+r[i]).substr((""+r[i]).length-1,t))):o=o.replace(RegExp.$1,1===RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return o}function a(e){var n;t?(l.clear(),s.getConditionItem("finished",e,l.part)):(n=document.querySelectorAll("#list li"),Array.prototype.forEach.call(n,function(t){e?t.classList.contains("finished")?l.appear(t):l.disappear(t):t.classList.contains("finished")?l.disappear(t):l.appear(t)}),n=document.querySelectorAll("#list li"))}function u(e,n){n.classList.toggle("finished"),t&&(e.finished=!e.finished,s.updateItem(e,o))}var s,l=e("./refresh.js"),d=e("./createLi");return t&&(s=e("indexeddb-crud"),console.log("get db")),{add:n,enterAdd:function(e){13===e.keyCode&&n()},clickLi:function(e){var n,o=e.target;o.getAttribute("data-id")&&(t?(n=parseInt(o.getAttribute("data-id"),10),s.getItem(n,u,[o])):u(void 0,o))},removeLi:function(e){var n;"close"===e.target.className&&(l.disappear(e.target.parentNode),t&&(n=parseInt(e.target.getAttribute("data-x"),10),s.removeItem(n,o)))},showInit:function(){l.clear(),t?s.getAll(l.init):l.init()},showAll:o,showClear:function(){l.clear(),l.random(),t&&s.clear()},showDone:function(){a(!0)},showTodo:function(){a(!1)}}}(t)}return{success:t(!0),fail:t(!1)}}();t.exports=o},{"./createLi":4,"./refresh.js":6,"indexeddb-crud":1}],6:[function(e,t,n){"use strict";var o=function(){function t(){var e=["Yesterday You Said Tomorrow","Why are we here?","All in, or nothing","You Never Try, You Never Know","The unexamined life is not worth living. -- Socrates"],t=Math.floor(Math.random()*e.length);c(document.createTextNode(e[t]))}function n(e,t){e&&0!==e.length?o(e):t()}function o(e){var t=r(e);document.querySelector("#list").appendChild(t)}function r(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment(),o=document.createDocumentFragment();return e.forEach(function(e){e.finished?n.insertBefore(a(e),n.firstChild):t.insertBefore(a(e),t.firstChild)}),o.appendChild(t),o.appendChild(n),o}function i(){c(document.createTextNode("Welcome~, try to add your first to-do list : )"))}function c(e){var t=document.createElement("li");t.appendChild(e),t.className="aphorism",document.querySelector("#list").appendChild(t)}var a=e("./createLi.js");return{init:function(e){n(e,i)},all:function(e){n(e,t)},part:function(e){var n;e&&0!==e.length?(n=e.reduce(function(e,t){return e.insertBefore(a(t),e.firstChild),e},document.createDocumentFragment()),document.querySelector("#list").appendChild(n)):t()},clear:function(){for(var e=document.querySelector("#list");e.hasChildNodes();)e.removeChild(e.firstChild)},appear:function(e){e.style.display="block"},disappear:function(e){e.style.display="none"},random:t}}();t.exports=o},{"./createLi.js":4}]},{},[2]);