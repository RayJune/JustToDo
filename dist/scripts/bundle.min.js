!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";var r=function(e,t,n){function r(){return o._db.transaction([o._storeName],"readwrite").objectStore(o._storeName)}var o;if(!window.indexedDB)return window.alert("Your browser doesn't support a stable version of IndexedDB. We will offer you the without indexedDB mode"),n&&n(),0;(o=this)._db,o._presentKey=0,o._key=e.key,o._storeName=e.storeName,function(){var n=window.indexedDB.open(e.name,e.version);n.onblocked=function(){},n.onupgradeneeded=function(t){o._db=t.target.result,console.log("onupgradeneeded in"),o._db.objectStoreNames.contains(o._storeName)||(o._db.createObjectStore(o._storeName,{keyPath:o._key,autoIncrement:!0}).transaction.oncomplete=function(){if(console.log("create "+o._storeName+"'s objectStore succeed"),e.initialData)try{JSON.parse(JSON.stringify(e.initialData)).forEach(function(e,t){var n=r().add(e);n.onsuccess=function(){console.log("add initial data["+t+"] successed")}})}catch(e){throw window.alert("please set correct initial array object data :)"),console.log(e),e}})},n.onsuccess=function(e){o._db=e.target.result,console.log("✓ open "+o._storeName+"'s objectStore success"),r().openCursor(IDBKeyRange.lowerBound(1),"next").onsuccess=function(e){var n=e.target.result;n?(o._presentKey=n.value.id,n.continue()):(console.log("✓ now "+o._storeName+"'s max key is "+o._presentKey),t&&(t(),console.log("✓ "+o._storeName+"'s openSuccessCallback: "+t.name+" finished")))}},n.onerror=function(e){window.alert("Something is wrong with indexedDB, for more information, checkout console"),console.log(e.target.error)}}()};r.prototype=function(){function e(e,t,n){return(n?e.transaction([t],"readwrite"):e.transaction([t])).objectStore(t)}function t(t,n){return e(t,n,!0).openCursor(IDBKeyRange.lowerBound(1),"next")}return{constructor:r,getLength:function(){return this._presentKey},getNewKey:function(){return this._presentKey+=1,this._presentKey},getItem:function(t,n){var r=this,o=e(r._db,r._storeName,!1).get(parseInt(t,10));o.onsuccess=function(){console.log("✓ get "+r._key+" = "+t+" data success :)"),n&&n(o.result)}},getConditionItem:function(e,n,r){var o=[];t(this._db,this._storeName).onsuccess=function(t){var i=t.target.result;i?(n?i.value[e]&&o.push(i.value):n||i.value[e]||o.push(i.value),i.continue()):r&&r(o)}},getAll:function(e){var n=[];t(this._db,this._storeName).onsuccess=function(t){var r=t.target.result;r?(n.push(r.value),r.continue()):(console.log("✓ get all data success :)"),e&&e(n))}},addItem:function(t,n){var r=this;e(r._db,r._storeName,!0).add(t).onsuccess=function(){console.log("✓ add "+r._key+" = "+t[r._key]+" data succeed :)"),n&&n(t)}},removeItem:function(t,n){var r=this;e(r._db,r._storeName,!0).delete(t).onsuccess=function(){console.log("✓ remove "+r._key+" = "+t+" data success :)"),n&&n(t)}},removeConditionItem:function(e,n,r){t(this._db,this._storeName).onsuccess=function(t){var o=t.target.result;o?(n?o.value[e]&&o.delete():n||o.value[e]||o.delete(),o.continue()):r&&r()}},clear:function(e){t(this._db,this._storeName).onsuccess=function(t){var n=t.target.result;n?(n.delete(),n.continue()):(console.log("✓ clear all data success :)"),e&&e("clear all data success"))}},updateItem:function(t,n){var r=this;e(r._db,r._storeName,!0).put(t).onsuccess=function(){console.log("✓ update "+r._key+" = "+t[r._key]+" data success :)"),n&&n(t)}}}}(),t.exports=r},{}],2:[function(e,t,n){"use strict";t.exports={name:"JustToDo",version:"19",key:"id",storeName:"aphorism",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"}]}},{}],3:[function(e,t,n){"use strict";t.exports={name:"JustToDo",version:"19",key:"id",storeName:"list",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]}},{}],4:[function(e,t,n){"use strict";t.exports=function(){var t=e("indexeddb-crud"),n=e("./db/listConfig.js"),r=e("./db/aphorismConfig.js"),o=e("./utlis/addEvents.js");return{aphorismDBHandler:new t(r,function(){console.log("aphorismDB is ready")}),listDBHandler:new t(n,o.dbSuccess,o.dbFail)}}()},{"./db/aphorismConfig.js":2,"./db/listConfig.js":3,"./utlis/addEvents.js":5,"indexeddb-crud":1}],5:[function(e,t,n){"use strict";t.exports=function(){function t(t){return function(){!function(t){var n,r=e("./eventHandler/eventHandler.js"),o=t?r.dbSuccess:r.dbFail;o.showInit(),(n=document.querySelector("#list")).addEventListener("click",o.clickLi,!1),n.addEventListener("click",o.removeLi,!1),document.addEventListener("keydown",o.enterAdd,!1),document.querySelector("#add").addEventListener("click",o.add,!1),document.querySelector("#showDone").addEventListener("click",o.showDone,!1),document.querySelector("#showTodo").addEventListener("click",o.showTodo,!1),document.querySelector("#showAll").addEventListener("click",o.showAll,!1),document.querySelector("#showClear").addEventListener("click",o.showClear,!1)}(t)}}return{dbSuccess:t(!0),dbFail:t(!1)}}()},{"./eventHandler/eventHandler.js":8}],6:[function(e,t,n){"use strict";var r=function(){function t(){var e,t,r,o=document.querySelector("#input").value;return""===o?(window.alert("please input a real data~"),0):(n(),u+=1,t=c.dataGenerator(u,o),r=a(t),(e=document.querySelector("#list")).insertBefore(r,e.firstChild),document.querySelector("#input").value="",0)}function n(){var e=Object.keys(n),t=document.querySelector("#list"),n=document.querySelectorAll("#list li");return e.forEach(function(r){n[e[r]].classList.contains("aphorism")&&t.removeChild(n[e[r]])})}function r(){var e=Object.keys(document.querySelectorAll("#list li"));e.forEach(function(t){var n=document.querySelector("#list"),r=document.querySelectorAll("#list li")[e[t]];i(r,!0),r.classList.contains("finished")&&(n.removeChild(n.childNodes[e[t]]),n.appendChild(r))})}function o(e){Array.prototype.forEach.call(document.querySelectorAll("#list li"),function(t){e?t.classList.contains("finished")?i(t,!0):i(t,!1):t.classList.contains("finished")?i(t,!1):i(t,!0)}),n(),c.ifEmpty.addRandom()}function i(e,t){e.style.display=t?"block":"none"}var s=e("../refresh/refresh.js").dbFail,a=e("../liGenerator.js"),c=e("./general.js"),u=0;return c.ifEmpty.addRandom=function(){document.querySelector("#list").firstChild&&!function(){var e=Object.keys(t),t=document.querySelectorAll("#list li");return e.every(function(n){return"none"===t[e[n]].style.display})}()||s.random()},{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t=e.target;t.getAttribute("data-id")&&(function(e){e.classList.toggle("finished")}(t),r())},removeLi:function(e){var t,n,r;"close"===e.target.className&&(n=document.querySelector("#list"),r=document.querySelectorAll("#list li"),t=function(e){var t,n=Object.keys(r),r=document.querySelectorAll("#list li");for(t in n)if(r[n[t]].getAttribute("data-id")===e)return n[t];return"Wrong id, not found in DOM tree"}(e.target.parentNode.getAttribute("data-id")),n.removeChild(r[t]),c.ifEmpty.addRandom())},showInit:function(){s.clear(),s.init()},showAll:r,showClear:function(){s.clear(),s.random()},showDone:function(){o(!0)},showTodo:function(){o(!1)}}}();t.exports=r},{"../liGenerator.js":10,"../refresh/refresh.js":14,"./general.js":9}],7:[function(e,t,n){"use strict";var r=function(){function t(){var e,t,n=document.querySelector("#input").value;return""===n?(window.alert("please input a real data~"),0):(c.ifEmpty.removeInit(),t=c.dataGenerator(i.getNewKey(),n),(e=document.querySelector("#list")).insertBefore(a(t),e.firstChild),document.querySelector("#input").value="",i.addItem(t),0)}function n(){s.clear(),i.getAll(s.all)}function r(e){s.clear(),i.getConditionItem("finished",e,s.part)}function o(e){e.finished=!e.finished,i.updateItem(e,n)}var i=e("../../main.js").listDBHandler,s=e("../refresh/refresh.js").dbSuccess,a=e("../liGenerator.js"),c=e("./general.js");return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t,n=e.target;n.classList.contains("aphorism")||n.getAttribute("data-id")&&(n.classList.toggle("finished"),t=parseInt(n.getAttribute("data-id"),10),i.getItem(t,o))},removeLi:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.parentNode.getAttribute("data-id"),10),i.removeItem(t,n))},showInit:function(){s.clear(),i.getAll(s.init)},showAll:n,showClear:function(){s.clear(),s.random(),i.clear()},showDone:function(){r(!0)},showTodo:function(){r(!1)}}}();t.exports=r},{"../../main.js":4,"../liGenerator.js":10,"../refresh/refresh.js":14,"./general.js":9}],8:[function(e,t,n){"use strict";t.exports={dbSuccess:e("./dbSuccess.js"),dbFail:e("./dbFail.js")}},{"./dbFail.js":6,"./dbSuccess.js":7}],9:[function(e,t,n){var r=function(){return{ifEmpty:{removeInit:function(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)}},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:function(e){var t,n=new Date,r=e,o={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var i in o)new RegExp("("+i+")").test(r)&&("y+"===i?r=r.replace(RegExp.$1,(""+o[i]).substr(4-RegExp.$1.length)):"S+"===i?(t=1===(t=RegExp.$1.length)?3:t,r=r.replace(RegExp.$1,("00"+o[i]).substr((""+o[i]).length-1,t))):r=r.replace(RegExp.$1,1===RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return r}("yyyy年MM月dd日 hh:mm")}}}}();t.exports=r},{}],10:[function(e,t,n){"use strict";var r=function(){function e(e,t){var n=document.createTextNode(t.date+": "),r=document.createElement("span"),o=document.createTextNode(" "+t.event);r.appendChild(o),e.appendChild(n),e.appendChild(r),t.finished&&e.classList.add("finished"),function(e){var t=document.createElement("span"),n=document.createTextNode("×");t.appendChild(n),t.className="close",e.appendChild(t)}(e),function(e,t,n){e.setAttribute(t,n)}(e,"data-id",t.id)}return function(t){var n=document.createElement("li");return e(n,t),n}}();t.exports=r},{}],11:[function(e,t,n){t.exports=function(){function t(){var e=["Yesterday You Said Tomorrow","Why are we here?","All in, or nothing","You Never Try, You Never Know","The unexamined life is not worth living. -- Socrates"],t=e[Math.floor(Math.random()*e.length)];n.sentenceGenerator(t)}var n=e("./general.js");return{init:n.init,all:n.all.bind(null,t),part:n.part.bind(null,t),clear:n.clear,random:t}}()},{"./general.js":13}],12:[function(e,t,n){t.exports=function(){function t(){var e=Math.ceil(Math.random()*r.getLength());r.getItem(e,n)}function n(e){var t=e.content;o.sentenceGenerator(t)}var r=e("../../main.js").aphorismDBHandler,o=e("./general.js");return{init:o.init,all:o.all.bind(null,t),part:o.part.bind(null,t),clear:o.clear,random:t}}()},{"../../main.js":4,"./general.js":13}],13:[function(e,t,n){"use strict";var r=function(){function t(e,t){t&&0!==t.length?function(e){var t=function(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment(),r=document.createDocumentFragment();return e.forEach(function(e){e.finished?n.insertBefore(o(e),n.firstChild):t.insertBefore(o(e),t.firstChild)}),r.appendChild(t),r.appendChild(n),r}(e);document.querySelector("#list").appendChild(t)}(t):e()}function n(){r("Welcome~, try to add your first to-do list : )")}function r(e){var t=document.createElement("li"),n=document.createTextNode(e);t.appendChild(n),t.className="aphorism",document.querySelector("#list").appendChild(t)}var o=e("../liGenerator.js");return{init:function(e){t(n,e)},all:function(e,n){t(e,n)},part:function(e,t){var n;t&&0!==t.length?(n=t.reduce(function(e,t){return e.insertBefore(o(t),e.firstChild),e},document.createDocumentFragment()),document.querySelector("#list").appendChild(n)):e()},clear:function(){for(var e=document.querySelector("#list");e.hasChildNodes();)e.removeChild(e.firstChild)},sentenceGenerator:r}}();t.exports=r},{"../liGenerator.js":10}],14:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{"./dbFail.js":11,"./dbSuccess.js":12,dup:8}]},{},[4]);