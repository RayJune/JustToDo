!function e(t,n,o){function r(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return r(n||e)},u,u.exports,e,t,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var r=o.transaction([e]);a[e]=0,n(r,e).onsuccess=function(t){var n=t.target.result;n&&(a[e]=n.value.id,n.continue())},r.oncomplete=function(){console.log("✓ now "+e+" 's max key is "+a[e]),t&&(t(),console.log("✓ openSuccessCallback finished"))}}function t(e,t){try{return JSON.parse(JSON.stringify(e))}catch(e){throw window.alert("please set correct "+t+" array object :)"),console.log(e),e}}function n(e,t){return e.objectStore(t).openCursor(IDBKeyRange.lowerBound(1),"next")}var o=void 0,r=void 0,a={};return{open:function(n,a,i){return window.indexedDB?(function(n,a){var i=window.indexedDB.open(n.name,n.version);i.onblocked=function(){window.alert("Please close all other tabs with this site open")},i.onupgradeneeded=function(r){o=r.target.result,console.log("✓ onupgradeneeded in"),function(n){t(n,"storeName").forEach(function(n){o.objectStoreNames.contains(n.storeName)||function(n){o.createObjectStore(n.storeName,{keyPath:n.key,autoIncrement:!0}).transaction.oncomplete=function(){console.log("✓ create "+n.storeName+" 's object store succeed"),n.initialData&&function(n,r){var a=o.transaction([n],"readwrite"),i=a.objectStore(n);t(r,"initial").forEach(function(e,t){var n=i.add(e);n.onsuccess=function(){console.log("✓ add initial data["+t+"] successed")}}),a.oncomplete=function(){console.log("✓ add all "+n+" 's initial data done :)"),e(n)}}(n.storeName,n.initialData)}}(n)})}(n.storeConfig)},i.onsuccess=function(i){(o=i.target.result).onversionchange=function(){o.close(),window.alert("A new version of this page is ready. Please reload")},function(n,o){var a=t(n,"storeName");a.forEach(function(t,n){0===n&&(r=t.storeName),n===a.length-1?e(t.storeName,function(){o(),console.log("✓ open indexedDB success")}):e(t.storeName)})}(n.storeConfig,a)},i.onerror=function(e){throw window.alert("Something is wrong with indexedDB, for more information, checkout console"),console.log(e.target.error),new Error(e.target.error)}}(n,a),0):(i?i():window.alert("✔ Your browser doesn't support a stable version of IndexedDB. You can install latest Chrome or FireFox to handler it"),0)},getLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return a[e]},getNewKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return a[e]+=1,a[e]},getItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=o.transaction([n]).objectStore(n).get(parseInt(e,10));a.onsuccess=function(){console.log("✓ get "+n+"'s "+a.source.keyPath+" = "+e+" data success :)"),t&&t(a.result)}},getWhetherConditionItem:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,s=o.transaction([i]),c=[];n(s,i).onsuccess=function(n){var o=n.target.result;o&&(t?o.value[e]&&c.push(o.value):t||o.value[e]||c.push(o.value),o.continue())},s.oncomplete=function(){console.log("✓ get "+i+"'s "+e+" = "+t+" data success :)"),a&&a(c)}},getAll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=o.transaction([t]),i=[];n(a,t).onsuccess=function(e){var t=e.target.result;t&&(i.push(t.value),t.continue())},a.oncomplete=function(){console.log("✓ get "+t+"'s all data success :)"),e&&e(i)}},addItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=o.transaction([n],"readwrite").objectStore(n).add(e);a.onsuccess=function(){console.log("✓ add "+n+"'s "+a.source.keyPath+"  = "+e[a.source.keyPath]+" data succeed :)"),t&&t(e)}},removeItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=o.transaction([n],"readwrite").objectStore(n).delete(e);a.onsuccess=function(){console.log("✓ remove "+n+"'s  "+a.source.keyPath+" = "+e+" data success :)"),t&&t(e)}},removeWhetherConditionItem:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,s=o.transaction([i],"readwrite");n(s,i).onsuccess=function(n){var o=n.target.result;o&&(t?o.value[e]&&o.delete():t||o.value[e]||o.delete(),o.continue())},s.oncomplete=function(){console.log("✓ remove "+i+"'s "+e+" = "+t+" data success :)"),a&&a()}},clear:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=o.transaction([t],"readwrite");n(a,t).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())},a.oncomplete=function(){console.log("✓ clear "+t+"'s all data success :)"),e&&e("clear all data success")}},updateItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=o.transaction([n],"readwrite").objectStore(n).put(e);a.onsuccess=function(){console.log("✓ update "+n+"'s "+a.source.keyPath+"  = "+e[a.source.keyPath]+" data success :)"),t&&t(e)}}}}();n.default=o},{}],2:[function(e,t,n){"use strict";t.exports=e("./dist/indexeddb-crud").default},{"./dist/indexeddb-crud":1}],3:[function(e,t,n){"use strict";t.exports={name:"JustToDo",version:"23",storeConfig:[{storeName:"list",key:"id",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]},{storeName:"aphorism",key:"id",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"},{id:7,content:"There is only one thing we say to lazy: NOT TODAY"}]}]}},{}],4:[function(e,t,n){"use strict";!function(){var t=e("indexeddb-crud"),n=e("./db/config"),o=e("./utlis/dbSuccess/addEvents"),r=e("./utlis/lazyLoadWithoutDB");e("../../templete/template")(),t.open(n,o,r)}()},{"../../templete/template":16,"./db/config":3,"./utlis/dbSuccess/addEvents":9,"./utlis/lazyLoadWithoutDB":13,"indexeddb-crud":2}],5:[function(e,t,n){"use strict";t.exports=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}},{}],6:[function(e,t,n){"use strict";t.exports=function(e){var t;e.showInit(),(t=document.querySelector("#list")).addEventListener("click",e.clickLi,!1),t.addEventListener("click",e.removeLi,!1),document.addEventListener("keydown",e.enterAdd,!1),document.querySelector("#add").addEventListener("click",e.add,!1),document.querySelector("#showDone").addEventListener("click",e.showDone,!1),document.querySelector("#showTodo").addEventListener("click",e.showTodo,!1),document.querySelector("#showAll").addEventListener("click",e.showAll,!1),document.querySelector("#showClearDone").addEventListener("click",e.showClearDone,!1),document.querySelector("#showClear").addEventListener("click",e.showClear,!1)}},{}],7:[function(e,t,n){"use strict";var o=function(){var t=e("../getFormatDate");return{resetInput:function(){document.querySelector("#input").value=""},dataGenerator:function(e,n){return{id:e,event:n,finished:!1,date:t("MM月dd日hh:mm")+" "}}}}();t.exports=o},{"../getFormatDate":12}],8:[function(e,t,n){"use strict";var o=function(){function t(e,t,n){e&&0!==e.length?document.querySelector("#list").innerHTML=n(e):t()}function n(){document.querySelector("#list").innerHTML=a("Welcome~, try to add your first to-do list : )")}function o(e){var t=function(e){var t=[],n=[];return e.forEach(function(e){e.finished?t.unshift(e):n.unshift(e)}),n.concat(t)}(e);return i(t)}function r(e){return i(e.reverse())}var a=e("../templete/sentenceGenerator"),i=e("../templete/itemGenerator"),s=e("../clearChildNodes");return{init:function(e){t(e,n,o)},all:function(e,n){t(n,e,o)},part:function(e,n){t(n,e,r)},clear:function(){s(document.querySelector("#list"))},sentenceHandler:function(e){var t=a(e);document.querySelector("#list").innerHTML=t}}}();t.exports=o},{"../clearChildNodes":5,"../templete/itemGenerator":14,"../templete/sentenceGenerator":15}],9:[function(e,t,n){"use strict";var o=function(){var t=e("../dbGeneral/addEventsGenerator"),n=e("../dbSuccess/eventsHandler");return function(){t(n)}}();t.exports=o},{"../dbGeneral/addEventsGenerator":6,"../dbSuccess/eventsHandler":10}],10:[function(e,t,n){"use strict";var o=function(){function t(){var e=document.querySelector("#input").value;""===e?window.alert("please input a real data~"):function(e){var t=s.dataGenerator(a.getNewKey(),e),n=c(t);(function(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)})(),document.querySelector("#list").insertAdjacentHTML("afterbegin",n),s.resetInput(),a.addItem(t)}(e)}function n(e){e.finished=!e.finished,a.updateItem(e,o)}function o(){a.getAll(i.all)}function r(e){a.getWhetherConditionItem("finished",e,i.part)}var a=e("indexeddb-crud"),i=e("../dbSuccess/refresh"),s=e("../dbGeneral/eventsHandlerGeneral"),c=e("../templete/itemGenerator");return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t,o=e.target;o.classList.contains("aphorism")||o.getAttribute("data-id")&&(o.classList.toggle("finished"),t=parseInt(o.getAttribute("data-id"),10),a.getItem(t,n))},removeLi:function(e){var t;"close"===e.target.className&&(document.querySelector("#list").removeChild(e.target.parentNode),document.querySelector("#list").hasChildNodes()||i.random(),t=parseInt(e.target.parentNode.getAttribute("data-id"),10),a.removeItem(t))},showInit:function(){a.getAll(i.init)},showAll:o,showDone:function(){r(!0)},showTodo:function(){r(!1)},showClearDone:function(){a.removeWhetherConditionItem("finished",!0,function(){a.getAll(i.part)})},showClear:function(){i.clear(),i.random(),a.clear()}}}();t.exports=o},{"../dbGeneral/eventsHandlerGeneral":7,"../dbSuccess/refresh":11,"../templete/itemGenerator":14,"indexeddb-crud":2}],11:[function(e,t,n){"use strict";var o=function(){function t(){var e=Math.ceil(Math.random()*o.getLength("aphorism"));o.getItem(e,n,"aphorism")}function n(e){var t=e.content;r.sentenceHandler(t)}var o=e("indexeddb-crud"),r=e("../dbGeneral/refreshGeneral");return{init:r.init,all:r.all.bind(null,t),part:r.part.bind(null,t),clear:r.clear,random:t}}();t.exports=o},{"../dbGeneral/refreshGeneral":8,"indexeddb-crud":2}],12:[function(e,t,n){"use strict";t.exports=function(e){var t,n=new Date,o=e,r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var a in r)new RegExp("("+a+")").test(o)&&("y+"===a?o=o.replace(RegExp.$1,(""+r[a]).substr(4-RegExp.$1.length)):"S+"===a?(t=1===(t=RegExp.$1.length)?3:t,o=o.replace(RegExp.$1,("00"+r[a]).substr((""+r[a]).length-1,t))):o=o.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return o}},{}],13:[function(e,t,n){"use strict";t.exports=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="./dist/scripts/lazyLoad.min.js",document.body.appendChild(e)}},{}],14:[function(e,t,n){"use strict";t.exports=function(e){var t=e,n=Handlebars.templates.li;return Array.isArray(e)||(t=[e]),n({listItems:t}).trim()}},{}],15:[function(e,t,n){"use strict";t.exports=function(e){return(0,Handlebars.templates.li)({sentence:e}).trim()}},{}],16:[function(e,t,n){t.exports=function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).li=e({1:function(e,t,n,o,r){var a;return'  <li class="aphorism">'+e.escapeExpression("function"==typeof(a=null!=(a=n.sentence||(null!=t?t.sentence:t))?a:n.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"sentence",hash:{},data:r}):a)+"</li>\n"},3:function(e,t,n,o,r){var a;return null!=(a=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.listItems:t,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r}))?a:""},4:function(e,t,n,o,r){var a;return null!=(a=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.finished:t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.program(7,r,0),data:r}))?a:""},5:function(e,t,n,o,r){var a,i=null!=t?t:e.nullContext||{},s=n.helperMissing,c="function",l=e.escapeExpression;return'      <li class="finished" data-id='+l(typeof(a=null!=(a=n.id||(null!=t?t.id:t))?a:s)===c?a.call(i,{name:"id",hash:{},data:r}):a)+">\n        "+l(typeof(a=null!=(a=n.date||(null!=t?t.date:t))?a:s)===c?a.call(i,{name:"date",hash:{},data:r}):a)+" : \n        <span>"+l(typeof(a=null!=(a=n.event||(null!=t?t.event:t))?a:s)===c?a.call(i,{name:"event",hash:{},data:r}):a)+'</span>\n        <span class="close">×</span>\n      </li>\n'},7:function(e,t,n,o,r){var a,i=null!=t?t:e.nullContext||{},s=n.helperMissing,c="function",l=e.escapeExpression;return"      <li data-id="+l(typeof(a=null!=(a=n.id||(null!=t?t.id:t))?a:s)===c?a.call(i,{name:"id",hash:{},data:r}):a)+">\n        "+l(typeof(a=null!=(a=n.date||(null!=t?t.date:t))?a:s)===c?a.call(i,{name:"date",hash:{},data:r}):a)+" : \n        <span>"+l(typeof(a=null!=(a=n.event||(null!=t?t.event:t))?a:s)===c?a.call(i,{name:"event",hash:{},data:r}):a)+'</span>\n        <span class="close">×</span>\n      </li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var a;return null!=(a=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.sentence:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?a:""},useData:!0})}},{}]},{},[4]);