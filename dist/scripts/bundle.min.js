!function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n||e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r=function(){function e(e,o){var i=indexedDB.open(e.name,e.version);u=e.storeName,s=e.key,l=t(e.initialData),p=n(l),f=e.initialJSONDataUseful,i.onerror=function(){console.log("Pity, fail to load indexedDB")},i.onsuccess=function(e){(c=e.target.result).onerror=function(e){window.alert("Database error: "+e.target.errorCode)},o(),r()},i.onupgradeneeded=function(e){console.log(l),console.log(p),c=e.target.result,console.log("scheme up"),c.objectStoreNames.contains(u)||(c.createObjectStore(u,{keyPath:s,autoIncrement:!0}),console.log(void 0),console.log(p))}}function t(e){var t;try{t=JSON.parse(JSON.stringify(e))}catch(e){window.alert("Please set correct JSON type :>"),t=!1}finally{return t}}function n(e){return e?e.length?e.length:1:0}function r(){var e=o(!0),t=IDBKeyRange.lowerBound(0);e.openCursor(t,"next").onsuccess=function(e){var t=e.target.result;t?(t.continue(),d=t.value.id):(d||(d=0),console.log("now key is:"+d))}}function o(e){return(e?c.transaction([u],"readwrite"):c.transaction([u])).objectStore(u)}function i(){return f?IDBKeyRange.lowerBound(0):IDBKeyRange.lowerBound(0,!0)}function a(e,t,n){n?(n.unshift(t),e.apply(null,n)):e(t)}var c,u,s,d,l,f,p;return{init:function(t,n){return window.indexedDB?(e(t,n),0):(window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),0)},getNewKey:function(){return d+=1},addItem:function(e,t,n){o(!0).add(e).onsuccess=function(){console.log("Bravo, success to add one data to indexedDB"),t&&a(t,e,n)}},getItem:function(e,t,n){var r=o(!1).get(e);r.onsuccess=function(){console.log("Great, get (key:"+e+"')s data succeed"),a(t,r.result,n)}},getConditionItem:function(e,t,n,r){var c=o(!0),u=i(),s=[];c.openCursor(u,"next").onsuccess=function(o){var i=o.target.result;i?(t?i.value[e]&&s.push(i.value):t||i.value[e]||s.push(i.value),i.continue()):a(n,s,r)}},getAll:function(e,t){var n=o(!0),r=i(),c=[];n.openCursor(r,"next").onsuccess=function(n){var r=n.target.result;r?(c.push(r.value),r.continue()):a(e,c,t)}},updateItem:function(e,t,n){o(!0).put(e).onsuccess=function(){console.log("Aha, modify succeed"),t&&a(t,e,n)}},removeItem:function(e,t,n){o(!0).delete(e).onsuccess=function(){console.log("delete (key: "+e+"')s value succeed"),t&&a(t,e,n)}},clear:function(e,t){var n=o(!0),r=i();n.openCursor(r,"next").onsuccess=function(n){var r=n.target.result;r?(r.delete().onsuccess=function(){},r.continue()):e&&a(e,"all data",t)}}}}();t.exports=r},{}],2:[function(e,t,n){"use strict";e("./utlis/addEvents.js").dbFail()},{"./utlis/addEvents.js":3}],3:[function(e,t,n){"use strict";var r=function(){function t(t){function n(t){var n,r=e("./eventHandler/eventHandler.js"),o=t?r.dbSuccess:r.dbFail;o.showInit(),(n=document.querySelector("#list")).addEventListener("click",o.clickLi,!1),n.addEventListener("click",o.removeLi,!1),document.addEventListener("keydown",o.enterAdd,!1),document.querySelector("#add").addEventListener("click",o.add,!1),document.querySelector("#showDone").addEventListener("click",o.showDone,!1),document.querySelector("#showTodo").addEventListener("click",o.showTodo,!1),document.querySelector("#showAll").addEventListener("click",o.showAll,!1),document.querySelector("#showClear").addEventListener("click",o.showClear,!1)}return function(){n(t)}}return{dbSuccess:t(!0),dbFail:t(!1)}}();t.exports=r},{"./eventHandler/eventHandler.js":7}],4:[function(e,t,n){"use strict";var r=function(){function e(e,r){var o=document.createTextNode(r.userDate+": "),i=document.createElement("span"),a=document.createTextNode(" "+r.event);i.appendChild(a),e.appendChild(o),e.appendChild(i),r.finished&&e.classList.add("finished"),t(e,r.id),n(e,"data-id",r.id)}function t(e){var t=document.createElement("span"),n=document.createTextNode("×");t.appendChild(n),t.className="close",e.appendChild(t)}function n(e,t,n){e.setAttribute(t,n)}return function(t){var n=document.createElement("li");return e(n,t),n}}();t.exports=r},{}],5:[function(e,t,n){"use strict";var r=function(){function t(){var e,t,n,r=document.querySelector("#input").value;return""===r?(alert("please input a real data~"),0):(s.ifEmpty.removeInit(),t=o(r),n=u(t),(e=document.querySelector("#list")).insertBefore(n,e.firstChild),document.querySelector("#input").value="",0)}function n(e){Array.prototype.forEach.call(document.querySelectorAll("#list li"),e)}function r(e){var t=document.querySelector("#list");t.removeChild(t.childNodes[e])}function o(e){return{id:d+=1,event:e,finished:!1,userDate:s.getNewDate("yyyy年MM月dd日 hh:mm")}}function i(e){n(function(t,n){e?t.classList.contains("finished")?c.appear(t):c.disappear(t):t.classList.contains("finished")?c.disappear(t):c.appear(t),t.classList.contains("finished")&&(r(n),document.querySelector("#list").appendChild(t))})}function a(e,t){e.classList.toggle("finished"),e.classList.contains("finished")&&(r(t),document.querySelector("#list").appendChild(e))}var c=e("../refresh.js"),u=e("../createLi.js"),s=e("./general.js"),d=-1;return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t=e.target,n=parseInt(t.getAttribute("data-id"),10);void 0!==n&&a(t,n)},removeLi:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.parentNode.getAttribute("data-id"),10),n(function(e,n){parseInt(e.getAttribute("data-id"),10)===t&&(r(n),s.ifEmpty.addRandom())}))},showInit:function(){c.clear(),c.init()},showAll:function(){n(function(e){c.appear(e)})},showClear:function(){c.clear(),c.random()},showDone:function(){i(!0)},showTodo:function(){i(!1)}}}();t.exports=r},{"../createLi.js":4,"../refresh.js":9,"./general.js":8}],6:[function(e,t,n){"use strict";var r=function(){function t(){var e,t,n,o=document.querySelector("#input").value;return""===o?(window.alert("please input a real data~"),0):(s.ifEmpty.removeInit(),t=r(o),n=u(t),(e=document.querySelector("#list")).insertBefore(n,e.firstChild),document.querySelector("#input").value="",a.addItem(t),0)}function n(){c.clear(),a.getAll(c.all)}function r(e){return{id:a.getNewKey(),event:e,finished:!1,userDate:s.getNewDate("yyyy年MM月dd日 hh:mm")}}function o(e){c.clear(),a.getConditionItem("finished",e,c.part)}function i(e,t){t.classList.toggle("finished"),e.finished=!e.finished,a.updateItem(e,n)}var a=e("indexeddb-crud"),c=e("../refresh.js"),u=e("../createLi.js"),s=e("./general.js");return{add:t,enterAdd:function(e){13===e.keyCode&&t()},clickLi:function(e){var t,n=e.target;n.getAttribute("data-id")&&(t=parseInt(n.getAttribute("data-id"),10),a.getItem(t,i,[n]))},removeLi:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.parentNode.getAttribute("data-id"),10),a.removeItem(t,n))},showInit:function(){c.clear(),a.getAll(c.init)},showAll:n,showClear:function(){c.clear(),c.random(),a.clear()},showDone:function(){o(!0)},showTodo:function(){o(!1)}}}();t.exports=r},{"../createLi.js":4,"../refresh.js":9,"./general.js":8,"indexeddb-crud":1}],7:[function(e,t,n){"use strict";var r={dbSuccess:e("./dbSuccess.js"),dbFail:e("./dbFail.js")};t.exports=r},{"./dbFail.js":5,"./dbSuccess.js":6}],8:[function(e,t,n){var r=function(){var t=e("../refresh.js");return{ifEmpty:{removeInit:function(){var e=document.querySelector("#list");"aphorism"===e.firstChild.className&&e.removeChild(e.firstChild)},addRandom:function(){document.querySelector("#list").firstChild&&t.random()}},getNewDate:function(e){var t,n=new Date,r=e,o={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var i in o)new RegExp("("+i+")").test(r)&&("y+"===i?r=r.replace(RegExp.$1,(""+o[i]).substr(4-RegExp.$1.length)):"S+"===i?(t=1===(t=RegExp.$1.length)?3:t,r=r.replace(RegExp.$1,("00"+o[i]).substr((""+o[i]).length-1,t))):r=r.replace(RegExp.$1,1===RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return r}}}();t.exports=r},{"../refresh.js":9}],9:[function(e,t,n){"use strict";var r=function(){function t(){var e=["Yesterday You Said Tomorrow","Why are we here?","All in, or nothing","You Never Try, You Never Know","The unexamined life is not worth living. -- Socrates"],t=Math.floor(Math.random()*e.length);a(document.createTextNode(e[t]))}function n(e,t){e&&0!==e.length?r(e):t()}function r(e){var t=o(e);document.querySelector("#list").appendChild(t)}function o(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment(),r=document.createDocumentFragment();return e.forEach(function(e){e.finished?n.insertBefore(c(e),n.firstChild):t.insertBefore(c(e),t.firstChild)}),r.appendChild(t),r.appendChild(n),r}function i(){a(document.createTextNode("Welcome~, try to add your first to-do list : )"))}function a(e){var t=document.createElement("li");t.appendChild(e),t.className="aphorism",document.querySelector("#list").appendChild(t)}var c=e("./createLi.js");return{init:function(e){n(e,i)},all:function(e){n(e,t)},part:function(e){var n;e&&0!==e.length?(n=e.reduce(function(e,t){return e.insertBefore(c(t),e.firstChild),e},document.createDocumentFragment()),document.querySelector("#list").appendChild(n)):t()},clear:function(){for(var e=document.querySelector("#list");e.hasChildNodes();)e.removeChild(e.firstChild)},appear:function(e){e.style.display="block"},disappear:function(e){e.style.display="none"},random:t}}();t.exports=r},{"./createLi.js":4}]},{},[2]);