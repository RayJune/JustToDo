!function o(u,l,i){function d(n,e){if(!l[n]){if(!u[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var a=l[n]={exports:{}};u[n][0].call(a.exports,function(e){var t=u[n][1][e];return d(t||e)},a,a.exports,o,u,l,i)}return l[n].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)d(i[e]);return d}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l=o(e("./utlis/log")),r=o(e("./utlis/crud")),a=o(e("./utlis/getAllRequest")),i=o(e("./utlis/parseJSONData")),d=o(e("./utlis/promiseGenerator"));function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0,c=void 0,u={};function f(n,e){var t=s.transaction([n]),r="now "+n+" 's max key is "+u[n];(u[n]=0,a.default)(t,n).onsuccess=function(e){var t=e.target.result;t&&(u[n]=t.value.id,t.continue())},d.default.transaction(t,r).then(e)}n.default={open:function(r){return new Promise(function(e,t){var o,u,n;window.indexedDB?(o=r,u=e,(n=window.indexedDB.open(o.name,o.version)).onblocked=function(){l.default.fail("Please close all other tabs with this site open")},n.onupgradeneeded=function(e){var t,n=e.target;s=n.result,l.default.success("onupgradeneeded in"),t=o.storeConfig,(0,i.default)(t,"storeName").forEach(function(e){var t,o,n,u,r,a;s.objectStoreNames.contains(e.storeName)||(o=(t=e).storeName,n=t.key,u=t.initialData,r=s.createObjectStore(o,{keyPath:n,autoIncrement:!0}).transaction,a="create "+o+" 's object store succeed",d.default.transaction(r,a).then(function(){var e,t,n,r,a;u&&(e=o,t=u,n=s.transaction([e],"readwrite"),r=n.objectStore(e),a="add all "+e+" 's initial data done",(0,i.default)(t,"initial").forEach(function(e,t){var n=r.add(e);n.onsuccess=function(){l.default.success("add initial data["+t+"] successed")}}),d.default.transaction(n,a).then(function(){f(e)}))}))})},n.onsuccess=function(e){var t,n,r,a=e.target;(s=a.result).onversionchange=function(){s.close(),l.default.fail("A new version of this page is ready. Please reload")},t=o.storeConfig,n=u,(r=(0,i.default)(t,"storeName")).forEach(function(e,t){0===t&&(c=e.storeName),t===r.length-1?f(e.storeName,function(){n(),l.default.success("open indexedDB success")}):f(e.storeName)})},n.onerror=function(e){var t=e.target;throw l.default.fail("Something is wrong with indexedDB, for more information, checkout console"),l.default.fail(t.error),new Error(t.error)}):(l.default.fail("Your browser doesn't support a stable version of IndexedDB. You can install latest Chrome or FireFox to handler it"),t())})},getLength:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c;return u[e]},getNewKey:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c;return u[e]+=1,u[e]},getItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c;return r.default.get(s,e,t)},getConditionItem:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:c;return r.default.getCondition(s,e,t,n)},getAll:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c;return r.default.getAll(s,e)},addItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c;return r.default.add(s,e,t)},removeItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c;return r.default.remove(s,e,t)},removeConditionItem:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:c;return r.default.removeCondition(s,e,t,n)},clear:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c;return r.default.clear(s,e)},updateItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c;return r.default.update(s,e,t)}}},{"./utlis/crud":2,"./utlis/getAllRequest":3,"./utlis/log":4,"./utlis/parseJSONData":5,"./utlis/promiseGenerator":6}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l=r(e("./promiseGenerator")),i=r(e("./getAllRequest"));function r(e){return e&&e.__esModule?e:{default:e}}n.default={get:function(e,t,n){var r=e.transaction([n]).objectStore(n).get(parseInt(t,10)),a="get "+n+"'s "+r.source.keyPath+" = "+t+" data success";return l.default.request(r,a,{property:"result"})},getCondition:function(e,n,r,t){var a=e.transaction([t]),o=[],u="get "+t+"'s "+n+" = "+r+" data success";return(0,i.default)(a,t).onsuccess=function(e){var t=e.target.result;t&&(t.value[n]===r&&o.push(t.value),t.continue())},l.default.transaction(a,u,o)},getAll:function(e,t){var n=e.transaction([t]),r=[],a="get "+t+"'s all data success";return(0,i.default)(n,t).onsuccess=function(e){var t=e.target.result;t&&(r.push(t.value),t.continue())},l.default.transaction(n,a,r)},add:function(e,t,n){var r=e.transaction([n],"readwrite").objectStore(n).add(t),a="add "+n+"'s "+r.source.keyPath+"  = "+t[r.source.keyPath]+" data succeed";return l.default.request(r,a,t)},remove:function(e,t,n){var r=e.transaction([n],"readwrite").objectStore(n).delete(t),a="remove "+n+"'s  "+r.source.keyPath+" = "+t+" data success";return l.default.request(r,a,t)},removeCondition:function(e,n,r,t){var a=e.transaction([t],"readwrite"),o="remove "+t+"'s "+n+" = "+r+" data success";return(0,i.default)(a,t).onsuccess=function(e){var t=e.target.result;t&&(t.value[n]===r&&t.delete(),t.continue())},l.default.transaction(a,o)},clear:function(e,t){var n=e.transaction([t],"readwrite"),r="clear "+t+"'s all data success";return(0,i.default)(n,t).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())},l.default.transaction(n,r)},update:function(e,t,n){var r=e.transaction([n],"readwrite").objectStore(n).put(t),a="update "+n+"'s "+r.source.keyPath+"  = "+t[r.source.keyPath]+" data success";return l.default.request(r,a,t)}}},{"./getAllRequest":3,"./promiseGenerator":6}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t){return e.objectStore(t).openCursor(IDBKeyRange.lowerBound(1),"next")}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={success:function(e){console.log("✓ "+e+" :)")},fail:function(e){console.log("✔ "+e)}};n.default=r},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t){try{return JSON.parse(JSON.stringify(e))}catch(e){throw window.alert("please set correct "+t+" array object"),console.log(e),e}}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("./log"),o=(r=a)&&r.__esModule?r:{default:r};n.default={request:function(n,r,a){return new Promise(function(t,e){n.onsuccess=function(){var e=a;a.property&&(e=n[a.property]),o.default.success(r),t(e)},n.onerror=function(){o.default.fail(n.error),e()}})},transaction:function(n,r,a){return new Promise(function(e,t){n.oncomplete=function(){o.default.success(r),e(a)},n.onerror=function(){o.default.fail(n.error),t()}})}}},{"./log":4}],7:[function(e,t,n){"use strict";t.exports=e("./dist/indexeddb-crud").default},{"./dist/indexeddb-crud":1}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"JustToDo",version:"23",storeConfig:[{storeName:"list",key:"id",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]},{storeName:"aphorism",key:"id",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"},{id:7,content:"There is only one thing we say to lazy: NOT TODAY"}]}]}},{}],9:[function(e,t,n){"use strict";var r=e("indexeddb-crud"),a=i(e("./db/config")),o=i(e("../templete/template")),u=i(e("./utlis/dbSuccess/addEvents")),l=i(e("./utlis/lazyLoadWithoutDB"));function i(e){return e&&e.__esModule?e:{default:e}}(0,o.default)(),(0,r.open)(a.default).then(u.default).catch(l.default)},{"../templete/template":21,"./db/config":8,"./utlis/dbSuccess/addEvents":14,"./utlis/lazyLoadWithoutDB":18,"indexeddb-crud":7}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.showInit();var t=document.querySelector("#list");t.addEventListener("click",e.clickLi,!1),t.addEventListener("click",e.removeLi,!1),document.addEventListener("keydown",e.enterAdd,!1),document.querySelector("#add").addEventListener("click",e.add,!1),document.querySelector("#showDone").addEventListener("click",e.showDone,!1),document.querySelector("#showTodo").addEventListener("click",e.showTodo,!1),document.querySelector("#showAll").addEventListener("click",e.showAll,!1),document.querySelector("#showClearDone").addEventListener("click",e.showClearDone,!1),document.querySelector("#showClear").addEventListener("click",e.showClear,!1)}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("../getFormatDate"),o=(r=a)&&r.__esModule?r:{default:r};n.default={resetInput:function(){document.querySelector("#input").value=""},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:(0,o.default)("MM月dd日hh:mm")}}}},{"../getFormatDate":17}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=u(e("../templete/itemGenerator")),r=u(e("../templete/sentenceGenerator")),o=u(e("../clearChildNodes"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){e&&0!==e.length?document.querySelector("#list").innerHTML=n(e):t()}function i(){document.querySelector("#list").innerHTML=(0,r.default)("Welcome~, try to add your first to-do list : )")}function d(e){var t,n,r=(t=[],n=[],e.forEach(function(e){return e.finished?t.unshift(e):n.unshift(e)}),n.concat(t));return(0,a.default)(r)}function s(e){return(0,a.default)(e.reverse())}n.default={init:function(e){l(e,i,d)},all:function(e,t){l(t,e,d)},part:function(e,t){l(t,e,s)},clear:function(){(0,o.default)(document.querySelector("#list"))},sentenceHandler:function(e){var t=(0,r.default)(e);document.querySelector("#list").innerHTML=t}}},{"../clearChildNodes":10,"../templete/itemGenerator":19,"../templete/sentenceGenerator":20}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("../dbGeneral/addEventsGenerator")),a=o(e("../dbSuccess/eventsHandler"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(){(0,r.default)(a.default)}},{"../dbGeneral/addEventsGenerator":11,"../dbSuccess/eventsHandler":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=r(e("indexeddb-crud")),a=r(e("../dbSuccess/refresh")),u=r(e("../dbGeneral/eventsHandlerGeneral")),l=r(e("../templete/itemGenerator"));function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e,t,n,r,a=document.querySelector("#input").value;""===a?window.alert("please input a real data~"):(e=a,t=u.default.dataGenerator(o.default.getNewKey(),e),n=(0,l.default)(t),"aphorism"===(r=document.querySelector("#list")).firstChild.className&&r.removeChild(r.firstChild),document.querySelector("#list").insertAdjacentHTML("afterbegin",n),u.default.resetInput(),o.default.addItem(t))}function d(e){var t=e;t.finished=!e.finished,o.default.updateItem(t).then(s)}function s(){o.default.getAll().then(a.default.all)}function c(e){o.default.getConditionItem("finished",e).then(a.default.part)}n.default={add:i,enterAdd:function(e){13===e.keyCode&&i()},clickLi:function(e){var t=e.target;if(!t.classList.contains("aphorism")&&t.getAttribute("data-id")){t.classList.toggle("finished");var n=parseInt(t.getAttribute("data-id"),10);o.default.getItem(n).then(d)}},removeLi:function(e){var t,n=e.target;if("close"===n.className){document.querySelector("#list").removeChild(n.parentNode),(t=document.querySelector("#list")).lastChild&&"#text"!==t.lastChild.nodeName||a.default.random();var r=parseInt(n.parentNode.getAttribute("data-id"),10);o.default.removeItem(r)}},showInit:function(){o.default.getAll().then(a.default.init)},showAll:s,showDone:function(){c(!0)},showTodo:function(){c(!1)},showClearDone:function(){o.default.removeConditionItem("finished",!0).then(o.default.getAll).then(a.default.part)},showClear:function(){a.default.clear(),o.default.clear().then(a.default.random)}}},{"../dbGeneral/eventsHandlerGeneral":12,"../dbSuccess/refresh":16,"../templete/itemGenerator":19,"indexeddb-crud":7}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("indexeddb-crud")),a=o(e("../dbGeneral/refreshGeneral"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){var e="aphorism",t=Math.ceil(Math.random()*r.default.getLength(e));r.default.getItem(t,e).then(l)}function l(e){var t=e.content;a.default.sentenceHandler(t)}n.default={init:a.default.init,all:a.default.all.bind(null,u),part:a.default.part.bind(null,u),clear:a.default.clear,random:u}},{"../dbGeneral/refreshGeneral":13,"indexeddb-crud":7}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date,n={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes()},r=e;return Object.keys(n).forEach(function(e){if(new RegExp("("+e+")").test(r))if("y+"===e)r=r.replace(RegExp.$1,(""+n[e]).substr(4-RegExp.$1.length));else if("S+"===e){var t=RegExp.$1.length;t=1===t?3:t,r=r.replace(RegExp.$1,("00"+n[e]).substr((""+n[e]).length-1,t))}else r=r.replace(RegExp.$1,1===RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length))}),r}},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="./dist/scripts/lazyLoad.min.js",document.body.appendChild(e)}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=Handlebars.templates.li,n=e;return Array.isArray(e)||(n=[e]),t({listItems:n}).trim()}},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,Handlebars.templates.li)({sentence:e}).trim()}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).li=e({1:function(e,t,n,r,a){var o;return'  <li class="aphorism">'+e.escapeExpression("function"==typeof(o=null!=(o=n.sentence||(null!=t?t.sentence:t))?o:n.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"sentence",hash:{},data:a}):o)+"</li>\n"},3:function(e,t,n,r,a){var o;return null!=(o=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.listItems:t,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?o:""},4:function(e,t,n,r,a){var o;return null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.finished:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?o:""},5:function(e,t,n,r,a){var o,u=null!=t?t:e.nullContext||{},l=n.helperMissing,i="function",d=e.escapeExpression;return'      <li class="finished" data-id='+d((void 0===(o=null!=(o=n.id||(null!=t?t.id:t))?o:l)?"undefined":s(o))===i?o.call(u,{name:"id",hash:{},data:a}):o)+">\n        "+d((void 0===(o=null!=(o=n.date||(null!=t?t.date:t))?o:l)?"undefined":s(o))===i?o.call(u,{name:"date",hash:{},data:a}):o)+" : \n        <span>"+d((void 0===(o=null!=(o=n.event||(null!=t?t.event:t))?o:l)?"undefined":s(o))===i?o.call(u,{name:"event",hash:{},data:a}):o)+'</span>\n        <span class="close">×</span>\n      </li>\n'},7:function(e,t,n,r,a){var o,u=null!=t?t:e.nullContext||{},l=n.helperMissing,i="function",d=e.escapeExpression;return"      <li data-id="+d((void 0===(o=null!=(o=n.id||(null!=t?t.id:t))?o:l)?"undefined":s(o))===i?o.call(u,{name:"id",hash:{},data:a}):o)+">\n        "+d((void 0===(o=null!=(o=n.date||(null!=t?t.date:t))?o:l)?"undefined":s(o))===i?o.call(u,{name:"date",hash:{},data:a}):o)+" : \n        <span>"+d((void 0===(o=null!=(o=n.event||(null!=t?t.event:t))?o:l)?"undefined":s(o))===i?o.call(u,{name:"event",hash:{},data:a}):o)+'</span>\n        <span class="close">×</span>\n      </li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){var o;return null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.sentence:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?o:""},useData:!0})}},{}]},{},[9]);