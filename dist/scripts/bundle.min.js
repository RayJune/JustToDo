!function e(t,n,o){function r(a,i){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(c)return c(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return r(n||e)},s,s.exports,e,t,n,o)}return n[a].exports}for(var c="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(e,n){var o=indexedDB.open(e.name,e.version);i=e.storeName,o.onerror=function(){console.log("Pity, fail to load indexedDB")},o.onsuccess=function(e){c=e.target.result,t(n)},o.onupgradeneeded=function(t){var n;(c=t.target.result).objectStoreNames.contains(i)||(n=c.createObjectStore(i,{keyPath:e.key,autoIncrement:!0})),n.add(e.dataDemo)}}function t(e){var t=n(!0),o=IDBKeyRange.lowerBound(0);t.openCursor(o,"next").onsuccess=function(t){var n=t.target.result;n?(n.continue(),a=n.value.id):(console.log("now key is:"+a),e())}}function n(e){return(e?c.transaction([i],"readwrite"):c.transaction([i])).objectStore(i)}function o(){return IDBKeyRange.lowerBound(0,!0)}function r(e,t,n){n?(n.unshift(t),e.apply(null,n)):e(t)}var c,a,i;return{init:function(t,n){return window.indexedDB?(n&&e(t,n),0):(window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),0)},getNewDataKey:function(){return a+=1},add:function(e,t,o){var c=n(!0).add(e);c.onerror=function(){console.log("Pity, failed to add one data to indexedDB")},c.onsuccess=function(){console.log("Bravo, success to add one data to indexedDB"),t&&r(t,e,o)}},get:function(e,t,o){var c=n(!1).get(e);c.onerror=function(){console.log("Pity, get (key:"+e+"')s data faild")},c.onsuccess=function(){console.log("Great, get (key:"+e+"')s data succeed"),r(t,c.result,o)}},getWhether:function(e,t,c,a){var i=n(!0),u=o(),d=[];i.openCursor(u,"next").onsuccess=function(n){var o=n.target.result;o?(e?o.value[t]&&d.push(o.value):e||o.value[t]||d.push(o.value),o.continue()):r(c,d,a)}},getAll:function(e,t){var c=n(!0),a=o(),i=[];c.openCursor(a,"next").onsuccess=function(n){var o=n.target.result;o?(i.push(o.value),o.continue()):r(e,i,t)}},update:function(e,t,o){var c=n(!0).put(e);c.onerror=function(){console.log("Pity, modify failed")},c.onsuccess=function(){console.log("Aha, modify succeed"),t&&r(t,e,o)}},delete:function(e,t,o){var c=n(!0).delete(e);c.onerror=function(){console.log("delete (key:"+e+"')s value faild")},c.onsuccess=function(){console.log("delete (key: "+e+"')s value succeed"),t&&r(t,e,o)}},clear:function(e,t){var c=n(!0),a=o();c.openCursor(a,"next").onsuccess=function(n){var o,c=n.target.result;c?((o=c.delete()).onsuccess=function(){},o.onerror=function(){console.log("Pity, delete all data faild")},c.continue()):e&&r(e,"all data",t)}}}}();t.exports=o},{}],2:[function(e,t,n){var o=function(){function e(e,o){var r=document.createTextNode(o.userDate+": "),c=document.createElement("span"),a=document.createTextNode(" "+o.event);c.appendChild(a),e.appendChild(r),e.appendChild(c),o.finished&&e.classList.add("checked"),t(e,o.id),n(e,"data-id",o.id)}function t(e,t){var o=document.createElement("span"),r=document.createTextNode("×");o.appendChild(r),o.className="close",n(o,"data-x",t),e.appendChild(o)}function n(e,t,n){e.setAttribute(t,n)}return function(t){var n=document.createElement("li");return e(n,t),n}}();t.exports=o},{}],3:[function(e,t,n){"use strict";t.exports=function(){var e={name:"justToDo",version:"6",key:"id",storeName:"user"};return e.dataDemo={id:0,event:0,finished:!0,date:0},e}()},{}],4:[function(e,t,n){"use strict";var o=function(){function t(){var e,t,r,c=document.querySelector("#input").value;return""===c?(alert("please input a real data~"),!1):(n(),t=o(c),r=d(t),(e=document.querySelector("#list")).insertBefore(r,e.firstChild),document.querySelector("#input").value="",i.add(t),0)}function n(){"aphorism"===document.querySelector("#list").className&&u.random()}function o(e){return{id:i.getNewDataKey(),event:e,finished:!1,userDate:r("yyyy年MM月dd日 hh:mm")}}function r(e){var t,n=new Date,o=e,r={"y+":n.getFullYear(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes()};for(var c in r)new RegExp("("+c+")").test(o)&&("y+"===c?o=o.replace(RegExp.$1,(""+r[c]).substr(4-RegExp.$1.length)):"S+"===c?(t=1===(t=RegExp.$1.length)?3:t,o=o.replace(RegExp.$1,("00"+r[c]).substr((""+r[c]).length-1,t))):o=o.replace(RegExp.$1,1===RegExp.$1.length?r[c]:("00"+r[c]).substr((""+r[c]).length)));return o}function c(e){i.getWhether(e,"finished",u.all),console.log("Aha, show data succeed")}function a(e,t){t.finished=!e.finished,t.finished?t.classList.add("checked"):t.classList.remove("checked"),e.finished=t.finished,i.update(e,u.all)}var i=e("indexeddb-crud"),u=e("./show.js"),d=e("./createNode");return{add:t,enter:function(e){13===e.keyCode&&t()},delete:function(e){var t;"close"===e.target.className&&(t=parseInt(e.target.getAttribute("data-x"),10),i.delete(t,u.all))},clear:function(){u.clear(),i.clear()},showDone:function(){c(!0)},showTodo:function(){c(!1)},li:function(e){var t,n=e.target;n.getAttribute("data-id")&&(t=parseInt(n.getAttribute("data-id"),10),i.get(t,a,[n]))}}}();t.exports=o},{"./createNode":2,"./show.js":6,"indexeddb-crud":1}],5:[function(e,t,n){"use strict";!function(){var t=e("indexeddb-crud"),n=e("./dbConfig.js"),o=e("./eventHandler.js"),r=e("./show.js");t.init(n,function(){var e=document.querySelector("#list");r.init(t),e.addEventListener("click",o.li,!1),e.addEventListener("click",o.delete,!1),document.querySelector("#add").addEventListener("click",o.add,!1),document.addEventListener("keydown",o.enter,!1),document.querySelector("#done").addEventListener("click",o.showDone,!1),document.querySelector("#todo").addEventListener("click",o.showToDo,!1),document.querySelector("#show").addEventListener("click",o.show,!1),document.querySelector("#clear").addEventListener("click",o.clear,!1)})}()},{"./dbConfig.js":3,"./eventHandler.js":4,"./show.js":6,"indexeddb-crud":1}],6:[function(e,t,n){"use strict";var o=function(){function t(){for(var e=document.querySelector("#list");e.hasChildNodes();)e.removeChild(e.firstChild)}function n(e){o(e,r)}function o(e,t){0===e.length?t():a(e)}function r(){c(document.createTextNode("Welcome~, try to add your first to-do list : )"))}function c(e){var t=document.createElement("li");t.appendChild(e),t.className="aphorism",document.querySelector("#list").appendChild(t)}function a(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment(),o=document.createDocumentFragment();e.forEach(function(e){e.finished?(console.log(d(e)),n.insertBefore(d(e),n.firstChild)):t.insertBefore(d(e),t.firstChild)}),o.appendChild(t),o.appendChild(n),document.querySelector("#list").appendChild(o),console.log("refresh list, and show succeed")}function i(e){o(e,u)}function u(){var e=["Yesterday You Said Tomorrow","Why are we here?","All in, or nothing","You Never Try, You Never Know","The unexamined life is not worth living. -- Socrates"],t=Math.floor(Math.random()*(e.length+1));c(document.createTextNode(e[t]))}var d=e("./createNode.js");return{init:function(e){t(),e.getAll(n)},all:function(e){t(),e.getAll(i)},clear:t,random:u}}();t.exports=o},{"./createNode.js":2}]},{},[5]);